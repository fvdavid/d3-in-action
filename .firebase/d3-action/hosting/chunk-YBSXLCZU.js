import{a as wr,b as Da,c as _a,g as Lr}from"./chunk-LUB4GBAX.js";import{Aa as Wr,Ab as _r,Ba as Ta,Bb as Er,Eb as Gr,Fa as ir,Ga as Qr,Ha as or,Ia,L as ca,Ma as La,Q as Z,R as nr,Ra as xa,S as z,Ta as Ca,Y as gr,a as cr,aa as Kr,b as hr,bb as yr,da as ha,e as Yr,ea as B,f as X,g as qr,ha as J,i as P,ia as ga,ib as jr,j as Y,ja as Fr,k as j,l as la,la as ma,ma as ya,mb as Mr,na as K,nb as Tr,o as w,ob as Ea,p as Zr,pa as Ma,pb as Ga,qb as Pa,ra as mr,rb as Sa,sb as Ir,u as pa,vb as xr,wb as Cr,x as $,xb as Dr,za as k}from"./chunk-XOTOSTGT.js";import{a as fa,b as ua}from"./chunk-HMR6D4PY.js";import"./chunk-KIRPRCXL.js";import"./chunk-7X44HFL5.js";import{La as da,Tb as pr,Wa as ur,hb as lr,qb as Vr,rb as Xr,sb as tr}from"./chunk-Q3C673SS.js";import"./chunk-JKOY2XUY.js";function ve(a){if(a){for(var r=[],n=0;n<a.length;n++)r.push(a[n].slice());return r}}function se(a,r){var n=a.label,e=r&&r.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:ve(e&&e.shape.points)}}var Ra=["align","verticalAlign","width","height","fontSize"],A=new gr,Jr=J(),de=J();function Pr(a,r,n){for(var e=0;e<n.length;e++){var t=n[e];r[t]!=null&&(a[t]=r[t])}}var Sr=["x","y","rotation"],fe=function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(r,n,e,t,o){var v=t.style,i=t.__hostTarget,d=i.textConfig||{},s=t.getComputedTransform(),f=t.getBoundingRect().plain();nr.applyTransform(f,f,s),s?A.setLocalTransform(s):(A.x=A.y=A.rotation=A.originX=A.originY=0,A.scaleX=A.scaleY=1),A.rotation=ya(A.rotation);var l=t.__hostTarget,u;if(l){u=l.getBoundingRect().plain();var p=l.getComputedTransform();nr.applyTransform(u,u,p)}var g=u&&l.getTextGuideLine();this._labelList.push({label:t,labelLine:g,seriesModel:e,dataIndex:r,dataType:n,layoutOption:o,computedLayoutOption:null,rect:f,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:t.ignore,labelGuideIgnore:g&&g.ignore,x:A.x,y:A.y,scaleX:A.scaleX,scaleY:A.scaleY,rotation:A.rotation,style:{x:v.x,y:v.y,align:v.align,verticalAlign:v.verticalAlign,width:v.width,height:v.height,fontSize:v.fontSize},cursor:t.cursor,attachedPos:d.position,attachedRot:d.rotation}})},a.prototype.addLabelsOfSeries=function(r){var n=this;this._chartViewList.push(r);var e=r.__model,t=e.get("labelLayout");(Zr(t)||la(t).length)&&r.group.traverse(function(o){if(o.ignore)return!0;var v=o.getTextContent(),i=mr(o);v&&!v.disableLabelLayout&&n._addLabel(i.dataIndex,i.dataType,e,v,t)})},a.prototype.updateLayoutConfig=function(r){var n=r.getWidth(),e=r.getHeight();function t(m,D){return function(){wr(m,D)}}for(var o=0;o<this._labelList.length;o++){var v=this._labelList[o],i=v.label,d=i.__hostTarget,s=v.defaultAttr,f=void 0;Zr(v.layoutOption)?f=v.layoutOption(se(v,d)):f=v.layoutOption,f=f||{},v.computedLayoutOption=f;var l=Math.PI/180;d&&d.setTextConfig({local:!1,position:f.x!=null||f.y!=null?null:s.attachedPos,rotation:f.rotate!=null?f.rotate*l:s.attachedRot,offset:[f.dx||0,f.dy||0]});var u=!1;if(f.x!=null?(i.x=Kr(f.x,n),i.setStyle("x",0),u=!0):(i.x=s.x,i.setStyle("x",s.style.x)),f.y!=null?(i.y=Kr(f.y,e),i.setStyle("y",0),u=!0):(i.y=s.y,i.setStyle("y",s.style.y)),f.labelLinePoints){var p=d.getTextGuideLine();p&&(p.setShape({points:f.labelLinePoints}),u=!1)}var g=Jr(i);g.needsUpdateLabelLine=u,i.rotation=f.rotate!=null?f.rotate*l:s.rotation,i.scaleX=s.scaleX,i.scaleY=s.scaleY;for(var c=0;c<Ra.length;c++){var h=Ra[c];i.setStyle(h,f[h]!=null?f[h]:s.style[h])}if(f.draggable){if(i.draggable=!0,i.cursor="move",d){var I=v.seriesModel;if(v.dataIndex!=null){var C=v.seriesModel.getData(v.dataType);I=C.getItemModel(v.dataIndex)}i.on("drag",t(d,I.getModel("labelLine")))}}else i.off("drag"),i.cursor=s.cursor}},a.prototype.layout=function(r){var n=r.getWidth(),e=r.getHeight(),t=Ea(this._labelList),o=j(t,function(d){return d.layoutOption.moveOverlap==="shiftX"}),v=j(t,function(d){return d.layoutOption.moveOverlap==="shiftY"});Ga(o,0,n),Pa(v,0,e);var i=j(t,function(d){return d.layoutOption.hideOverlap});Sa(i)},a.prototype.processLabelsOverall=function(){var r=this;P(this._chartViewList,function(n){var e=n.__model,t=n.ignoreLabelLineUpdate,o=e.isAnimationEnabled();n.group.traverse(function(v){if(v.ignore&&!v.forceLabelAnimation)return!0;var i=!t,d=v.getTextContent();!i&&d&&(i=Jr(d).needsUpdateLabelLine),i&&r._updateLabelLine(v,e),o&&r._animateLabels(v,e)})})},a.prototype._updateLabelLine=function(r,n){var e=r.getTextContent(),t=mr(r),o=t.dataIndex;if(e&&o!=null){var v=n.getData(t.dataType),i=v.getItemModel(o),d={},s=v.getItemVisual(o,"style");if(s){var f=v.getVisual("drawType");d.stroke=s[f]}var l=i.getModel("labelLine");Da(r,_a(i),d),wr(r,l)}},a.prototype._animateLabels=function(r,n){var e=r.getTextContent(),t=r.getTextGuideLine();if(e&&(r.forceLabelAnimation||!e.ignore&&!e.invisible&&!r.disableLabelAnimation&&!Ia(r))){var o=Jr(e),v=o.oldLayout,i=mr(r),d=i.dataIndex,s={x:e.x,y:e.y,rotation:e.rotation},f=n.getData(i.dataType);if(v){e.attr(v);var u=r.prevStates;u&&(qr(u,"select")>=0&&e.attr(o.oldLayoutSelect),qr(u,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),Qr(e,s,n,d)}else if(e.attr(s),!xa(e).valueAnimation){var l=pa(e.style.opacity,1);e.style.opacity=0,or(e,{style:{opacity:l}},n,d)}if(o.oldLayout=s,e.states.select){var p=o.oldLayoutSelect={};Pr(p,s,Sr),Pr(p,e.states.select,Sr)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};Pr(g,s,Sr),Pr(g,e.states.emphasis,Sr)}Ca(e,d,f,n,n)}if(t&&!t.ignore&&!t.invisible){var o=de(t),v=o.oldLayout,c={points:t.shape.points};v?(t.attr({shape:v}),Qr(t,{shape:c},n)):(t.setShape(c),t.style.strokePercent=0,or(t,{style:{strokePercent:1}},n)),o.oldLayout=c}},a}(),Aa=fe;var $r=J();function vr(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,n,e){var t=$r(n).labelManager;t||(t=$r(n).labelManager=new Aa),t.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(r,n,e){var t=$r(n).labelManager;e.updatedSeries.forEach(function(o){t.addLabelsOfSeries(n.getViewOfSeriesModel(o))}),t.updateLayoutConfig(n),t.layout(n),t.processLabelsOverall()})}var V=ma.CMD;function rr(a,r){return Math.abs(a-r)<1e-5}function Rr(a){var r=a.data,n=a.len(),e=[],t,o=0,v=0,i=0,d=0;function s(G,S){t&&t.length>2&&e.push(t),t=[G,S]}function f(G,S,R,E){rr(G,R)&&rr(S,E)||t.push(G,S,R,E,R,E)}function l(G,S,R,E,U,H){var b=Math.abs(S-G),q=Math.tan(b/4)*4/3,Q=S<G?-1:1,aa=Math.cos(G),ea=Math.sin(G),ta=Math.cos(S),na=Math.sin(S),ie=aa*U+R,oe=ea*H+E,ia=ta*U+R,oa=na*H+E,va=U*q*Q,sa=H*q*Q;t.push(ie-va*ea,oe+sa*aa,ia+va*na,oa-sa*ta,ia,oa)}for(var u,p,g,c,h=0;h<n;){var I=r[h++],C=h===1;switch(C&&(o=r[h],v=r[h+1],i=o,d=v,(I===V.L||I===V.C||I===V.Q)&&(t=[i,d])),I){case V.M:o=i=r[h++],v=d=r[h++],s(i,d);break;case V.L:u=r[h++],p=r[h++],f(o,v,u,p),o=u,v=p;break;case V.C:t.push(r[h++],r[h++],r[h++],r[h++],o=r[h++],v=r[h++]);break;case V.Q:u=r[h++],p=r[h++],g=r[h++],c=r[h++],t.push(o+2/3*(u-o),v+2/3*(p-v),g+2/3*(u-g),c+2/3*(p-c),g,c),o=g,v=c;break;case V.A:var m=r[h++],D=r[h++],y=r[h++],M=r[h++],L=r[h++],x=r[h++]+L;h+=1;var T=!r[h++];u=Math.cos(L)*y+m,p=Math.sin(L)*M+D,C?(i=u,d=p,s(i,d)):f(o,v,u,p),o=Math.cos(x)*y+m,v=Math.sin(x)*M+D;for(var _=(T?-1:1)*Math.PI/2,O=L;T?O>x:O<x;O+=_){var N=T?Math.max(O+_,x):Math.min(O+_,x);l(O,N,m,D,y,M)}break;case V.R:i=o=r[h++],d=v=r[h++],u=i+r[h++],p=d+r[h++],s(u,d),f(u,d,u,p),f(u,p,i,p),f(i,p,i,d),f(i,d,u,d);break;case V.Z:t&&f(o,v,i,d),o=i,v=d;break}}return t&&t.length>2&&e.push(t),e}function zr(a,r,n,e,t,o,v,i,d,s){if(rr(a,n)&&rr(r,e)&&rr(t,v)&&rr(o,i)){d.push(v,i);return}var f=2/s,l=f*f,u=v-a,p=i-r,g=Math.sqrt(u*u+p*p);u/=g,p/=g;var c=n-a,h=e-r,I=t-v,C=o-i,m=c*c+h*h,D=I*I+C*C;if(m<l&&D<l){d.push(v,i);return}var y=u*c+p*h,M=-u*I-p*C,L=m-y*y,x=D-M*M;if(L<l&&y>=0&&x<l&&M>=0){d.push(v,i);return}var T=[],_=[];z(a,n,t,v,.5,T),z(r,e,o,i,.5,_),zr(T[0],_[0],T[1],_[1],T[2],_[2],T[3],_[3],d,s),zr(T[4],_[4],T[5],_[5],T[6],_[6],T[7],_[7],d,s)}function Oa(a,r){var n=Rr(a),e=[];r=r||1;for(var t=0;t<n.length;t++){var o=n[t],v=[],i=o[0],d=o[1];v.push(i,d);for(var s=2;s<o.length;){var f=o[s++],l=o[s++],u=o[s++],p=o[s++],g=o[s++],c=o[s++];zr(i,d,f,l,u,p,g,c,v,r),i=g,d=c}e.push(v)}return e}function ba(a,r,n){var e=a[r],t=a[1-r],o=Math.abs(e/t),v=Math.ceil(Math.sqrt(o*n)),i=Math.floor(n/v);i===0&&(i=1,v=n);for(var d=[],s=0;s<v;s++)d.push(i);var f=v*i,l=n-f;if(l>0)for(var s=0;s<l;s++)d[s%v]+=1;return d}function Na(a,r,n){for(var e=a.r0,t=a.r,o=a.startAngle,v=a.endAngle,i=Math.abs(v-o),d=i*t,s=t-e,f=d>Math.abs(s),l=ba([d,s],f?0:1,r),u=(f?i:s)/l.length,p=0;p<l.length;p++)for(var g=(f?s:i)/l[p],c=0;c<l[p];c++){var h={};f?(h.startAngle=o+u*p,h.endAngle=o+u*(p+1),h.r0=e+g*c,h.r=e+g*(c+1)):(h.startAngle=o+g*c,h.endAngle=o+g*(c+1),h.r0=e+u*p,h.r=e+u*(p+1)),h.clockwise=a.clockwise,h.cx=a.cx,h.cy=a.cy,n.push(h)}}function ue(a,r,n){for(var e=a.width,t=a.height,o=e>t,v=ba([e,t],o?0:1,r),i=o?"width":"height",d=o?"height":"width",s=o?"x":"y",f=o?"y":"x",l=a[i]/v.length,u=0;u<v.length;u++)for(var p=a[d]/v[u],g=0;g<v[u];g++){var c={};c[s]=u*l,c[f]=g*p,c[i]=l,c[d]=p,c.x+=a.x,c.y+=a.y,n.push(c)}}function Ua(a,r,n,e){return a*e-n*r}function le(a,r,n,e,t,o,v,i){var d=n-a,s=e-r,f=v-t,l=i-o,u=Ua(f,l,d,s);if(Math.abs(u)<1e-6)return null;var p=a-t,g=r-o,c=Ua(p,g,f,l)/u;return c<0||c>1?null:new Z(c*d+a,c*s+r)}function pe(a,r,n){var e=new Z;Z.sub(e,n,r),e.normalize();var t=new Z;Z.sub(t,a,r);var o=t.dot(e);return o}function ar(a,r){var n=a[a.length-1];n&&n[0]===r[0]&&n[1]===r[1]||a.push(r)}function ce(a,r,n){for(var e=a.length,t=[],o=0;o<e;o++){var v=a[o],i=a[(o+1)%e],d=le(v[0],v[1],i[0],i[1],r.x,r.y,n.x,n.y);d&&t.push({projPt:pe(d,r,n),pt:d,idx:o})}if(t.length<2)return[{points:a},{points:a}];t.sort(function(h,I){return h.projPt-I.projPt});var s=t[0],f=t[t.length-1];if(f.idx<s.idx){var l=s;s=f,f=l}for(var u=[s.pt.x,s.pt.y],p=[f.pt.x,f.pt.y],g=[u],c=[p],o=s.idx+1;o<=f.idx;o++)ar(g,a[o].slice());ar(g,p),ar(g,u);for(var o=f.idx+1;o<=s.idx+e;o++)ar(c,a[o%e].slice());return ar(c,u),ar(c,p),[{points:g},{points:c}]}function Ha(a){var r=a.points,n=[],e=[];Fr(r,n,e);var t=new nr(n[0],n[1],e[0]-n[0],e[1]-n[1]),o=t.width,v=t.height,i=t.x,d=t.y,s=new Z,f=new Z;return o>v?(s.x=f.x=i+o/2,s.y=d,f.y=d+v):(s.y=f.y=d+v/2,s.x=i,f.x=i+o),ce(r,s,f)}function Ar(a,r,n,e){if(n===1)e.push(r);else{var t=Math.floor(n/2),o=a(r);Ar(a,o[0],t,e),Ar(a,o[1],n-t,e)}return e}function he(a,r){for(var n=[],e=0;e<r;e++)n.push(k(a));return n}function ge(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function me(a){for(var r=[],n=0;n<a.length;)r.push([a[n++],a[n++]]);return r}function Va(a,r){var n=[],e=a.shape,t;switch(a.type){case"rect":ue(e,r,n),t=Ma;break;case"sector":Na(e,r,n),t=Wr;break;case"circle":Na({r0:0,r:e.r,startAngle:0,endAngle:Math.PI*2,cx:e.cx,cy:e.cy},r,n),t=Wr;break;default:var o=a.getComputedTransform(),v=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,i=Y(Oa(a.getUpdatedPathProxy(),v),function(I){return me(I)}),d=i.length;if(d===0)Ar(Ha,{points:i[0]},r,n);else if(d===r)for(var s=0;s<d;s++)n.push({points:i[s]});else{var f=0,l=Y(i,function(I){var C=[],m=[];Fr(I,C,m);var D=(m[1]-C[1])*(m[0]-C[0]);return f+=D,{poly:I,area:D}});l.sort(function(I,C){return C.area-I.area});for(var u=r,s=0;s<d;s++){var p=l[s];if(u<=0)break;var g=s===d-1?u:Math.ceil(p.area/f*r);g<0||(Ar(Ha,{points:p.poly},g,n),u-=g)}}t=Ta;break}if(!t)return he(a,r);for(var c=[],s=0;s<n.length;s++){var h=new t;h.setShape(n[s]),ge(a,h),c.push(h)}return c}function ye(a,r){var n=a.length,e=r.length;if(n===e)return[a,r];for(var t=[],o=[],v=n<e?a:r,i=Math.min(n,e),d=Math.abs(e-n)/6,s=(i-2)/6,f=Math.ceil(d/s)+1,l=[v[0],v[1]],u=d,p=2;p<i;){var g=v[p-2],c=v[p-1],h=v[p++],I=v[p++],C=v[p++],m=v[p++],D=v[p++],y=v[p++];if(u<=0){l.push(h,I,C,m,D,y);continue}for(var M=Math.min(u,f-1)+1,L=1;L<=M;L++){var x=L/M;z(g,h,C,D,x,t),z(c,I,m,y,x,o),g=t[3],c=o[3],l.push(t[1],o[1],t[2],o[2],g,c),h=t[5],I=o[5],C=t[6],m=o[6]}u-=M-1}return v===a?[l,r]:[a,l]}function Xa(a,r){for(var n=a.length,e=a[n-2],t=a[n-1],o=[],v=0;v<r.length;)o[v++]=e,o[v++]=t;return o}function Me(a,r){for(var n,e,t,o=[],v=[],i=0;i<Math.max(a.length,r.length);i++){var d=a[i],s=r[i],f=void 0,l=void 0;d?s?(n=ye(d,s),f=n[0],l=n[1],e=f,t=l):(l=Xa(t||d,d),f=d):(f=Xa(e||s,s),l=s),o.push(f),v.push(l)}return[o,v]}function Ya(a){for(var r=0,n=0,e=0,t=a.length,o=0,v=t-2;o<t;v=o,o+=2){var i=a[v],d=a[v+1],s=a[o],f=a[o+1],l=i*f-s*d;r+=l,n+=(i+s)*l,e+=(d+f)*l}return r===0?[a[0]||0,a[1]||0]:[n/r/3,e/r/3,r]}function Te(a,r,n,e){for(var t=(a.length-2)/6,o=1/0,v=0,i=a.length,d=i-2,s=0;s<t;s++){for(var f=s*6,l=0,u=0;u<i;u+=2){var p=u===0?f:(f+u-2)%d+2,g=a[p]-n[0],c=a[p+1]-n[1],h=r[u]-e[0],I=r[u+1]-e[1],C=h-g,m=I-c;l+=C*C+m*m}l<o&&(o=l,v=s)}return v}function Ie(a){for(var r=[],n=a.length,e=0;e<n;e+=2)r[e]=a[n-e-2],r[e+1]=a[n-e-1];return r}function Le(a,r,n,e){for(var t=[],o,v=0;v<a.length;v++){var i=a[v],d=r[v],s=Ya(i),f=Ya(d);o==null&&(o=s[2]<0!=f[2]<0);var l=[],u=[],p=0,g=1/0,c=[],h=i.length;o&&(i=Ie(i));for(var I=Te(i,d,s,f)*6,C=h-2,m=0;m<C;m+=2){var D=(I+m)%C+2;l[m+2]=i[D]-s[0],l[m+3]=i[D+1]-s[1]}if(l[0]=i[I]-s[0],l[1]=i[I+1]-s[1],n>0)for(var y=e/n,M=-e/2;M<=e/2;M+=y){for(var L=Math.sin(M),x=Math.cos(M),T=0,m=0;m<i.length;m+=2){var _=l[m],O=l[m+1],N=d[m]-f[0],G=d[m+1]-f[1],S=N*x-G*L,R=N*L+G*x;c[m]=S,c[m+1]=R;var E=S-_,U=R-O;T+=E*E+U*U}if(T<g){g=T,p=M;for(var H=0;H<c.length;H++)u[H]=c[H]}}else for(var b=0;b<h;b+=2)u[b]=d[b]-f[0],u[b+1]=d[b+1]-f[1];t.push({from:l,to:u,fromCp:s,toCp:f,rotation:-p})}return t}function dr(a){return a.__isCombineMorphing}var Za="__mOriginal_";function Or(a,r,n){var e=Za+r,t=a[e]||a[r];a[e]||(a[e]=a[r]);var o=n.replace,v=n.after,i=n.before;a[r]=function(){var d=arguments,s;return i&&i.apply(this,d),o?s=o.apply(this,d):s=t.apply(this,d),v&&v.apply(this,d),s}}function sr(a,r){var n=Za+r;a[n]&&(a[r]=a[n],a[n]=null)}function qa(a,r){for(var n=0;n<a.length;n++)for(var e=a[n],t=0;t<e.length;){var o=e[t],v=e[t+1];e[t++]=r[0]*o+r[2]*v+r[4],e[t++]=r[1]*o+r[3]*v+r[5]}}function Ka(a,r){var n=a.getUpdatedPathProxy(),e=r.getUpdatedPathProxy(),t=Me(Rr(n),Rr(e)),o=t[0],v=t[1],i=a.getComputedTransform(),d=r.getComputedTransform();function s(){this.transform=null}i&&qa(o,i),d&&qa(v,d),Or(r,"updateTransform",{replace:s}),r.transform=null;var f=Le(o,v,10,Math.PI),l=[];Or(r,"buildPath",{replace:function(u){for(var p=r.__morphT,g=1-p,c=[],h=0;h<f.length;h++){var I=f[h],C=I.from,m=I.to,D=I.rotation*p,y=I.fromCp,M=I.toCp,L=Math.sin(D),x=Math.cos(D);ca(c,y,M,p);for(var T=0;T<C.length;T+=2){var _=C[T],O=C[T+1],N=m[T],G=m[T+1],S=_*g+N*p,R=O*g+G*p;l[T]=S*x-R*L+c[0],l[T+1]=S*L+R*x+c[1]}var E=l[0],U=l[1];u.moveTo(E,U);for(var T=2;T<C.length;){var N=l[T++],G=l[T++],H=l[T++],b=l[T++],q=l[T++],Q=l[T++];E===N&&U===G&&H===q&&b===Q?u.lineTo(q,Q):u.bezierCurveTo(N,G,H,b,q,Q),E=q,U=Q}}}})}function Ur(a,r,n){if(!a||!r)return r;var e=n.done,t=n.during;Ka(a,r),r.__morphT=0;function o(){sr(r,"buildPath"),sr(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},X({during:function(v){r.dirtyShape(),t&&t(v)},done:function(){o(),e&&e()}},n)),r}function xe(a,r,n,e,t,o){var v=16;a=t===n?0:Math.round(32767*(a-n)/(t-n)),r=o===e?0:Math.round(32767*(r-e)/(o-e));for(var i=0,d,s=(1<<v)/2;s>0;s/=2){var f=0,l=0;(a&s)>0&&(f=1),(r&s)>0&&(l=1),i+=s*s*(3*f^l),l===0&&(f===1&&(a=s-1-a,r=s-1-r),d=a,a=r,r=d)}return i}function Nr(a){var r=1/0,n=1/0,e=-1/0,t=-1/0,o=Y(a,function(i){var d=i.getBoundingRect(),s=i.getComputedTransform(),f=d.x+d.width/2+(s?s[4]:0),l=d.y+d.height/2+(s?s[5]:0);return r=Math.min(f,r),n=Math.min(l,n),e=Math.max(f,e),t=Math.max(l,t),[f,l]}),v=Y(o,function(i,d){return{cp:i,z:xe(i[0],i[1],r,n,e,t),path:a[d]}});return v.sort(function(i,d){return i.z-d.z}).map(function(i){return i.path})}function Fa(a){return Va(a.path,a.count)}function Br(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Wa(a,r,n){var e=[];function t(y){for(var M=0;M<y.length;M++){var L=y[M];dr(L)?t(L.childrenRef()):L instanceof K&&e.push(L)}}t(a);var o=e.length;if(!o)return Br();var v=n.dividePath||Fa,i=v({path:r,count:o});if(i.length!==o)return console.error("Invalid morphing: unmatched splitted path"),Br();e=Nr(e),i=Nr(i);for(var d=n.done,s=n.during,f=n.individualDelay,l=new gr,u=0;u<o;u++){var p=e[u],g=i[u];g.parent=r,g.copyTransform(l),f||Ka(p,g)}r.__isCombineMorphing=!0,r.childrenRef=function(){return i};function c(y){for(var M=0;M<i.length;M++)i[M].addSelfToZr(y)}Or(r,"addSelfToZr",{after:function(y){c(y)}}),Or(r,"removeSelfFromZr",{after:function(y){for(var M=0;M<i.length;M++)i[M].removeSelfFromZr(y)}});function h(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,sr(r,"addSelfToZr"),sr(r,"removeSelfFromZr")}var I=i.length;if(f)for(var C=I,m=function(){C--,C===0&&(h(),d&&d())},u=0;u<I;u++){var D=f?X({delay:(n.delay||0)+f(u,I,e[u],i[u]),done:m},n):n;Ur(e[u],i[u],D)}else r.__morphT=0,r.animateTo({__morphT:1},X({during:function(y){for(var M=0;M<I;M++){var L=i[M];L.__morphT=r.__morphT,L.dirtyShape()}s&&s(y)},done:function(){h();for(var y=0;y<a.length;y++)sr(a[y],"updateTransform");d&&d()}},n));return r.__zr&&c(r.__zr),{fromIndividuals:e,toIndividuals:i,count:I}}function Qa(a,r,n){var e=r.length,t=[],o=n.dividePath||Fa;function v(p){for(var g=0;g<p.length;g++){var c=p[g];dr(c)?v(c.childrenRef()):c instanceof K&&t.push(c)}}if(dr(a)){v(a.childrenRef());var i=t.length;if(i<e)for(var d=0,s=i;s<e;s++)t.push(k(t[d++%i]));t.length=e}else{t=o({path:a,count:e});for(var f=a.getComputedTransform(),s=0;s<t.length;s++)t[s].setLocalTransform(f);if(t.length!==e)return console.error("Invalid morphing: unmatched splitted path"),Br()}t=Nr(t),r=Nr(r);for(var l=n.individualDelay,s=0;s<e;s++){var u=l?X({delay:(n.delay||0)+l(s,e,t[s],r[s])},n):n;Ur(t[s],r[s],u)}return{fromIndividuals:t,toIndividuals:r,count:r.length}}function ja(a){return w(a[0])}function wa(a,r){for(var n=[],e=a.length,t=0;t<e;t++)n.push({one:a[t],many:[]});for(var t=0;t<r.length;t++){var o=r[t].length,v=void 0;for(v=0;v<o;v++)n[v%e].many.push(r[t][v])}for(var i=0,t=e-1;t>=0;t--)if(!n[t].many.length){var d=n[i].many;if(d.length<=1)if(i)i=0;else return n;var o=d.length,s=Math.ceil(o/2);n[t].many=d.slice(s,o),n[i].many=d.slice(0,s),i++}return n}var Ce={clone:function(a){for(var r=[],n=1-Math.pow(1-a.path.style.opacity,1/a.count),e=0;e<a.count;e++){var t=k(a.path);t.setStyle("opacity",n),r.push(t)}return r},split:null};function Hr(a,r,n,e,t,o){if(!a.length||!r.length)return;var v=ir("update",e,t);if(!(v&&v.duration>0))return;var i=e.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},v),s,f;ja(a)&&(s=a,f=r),ja(r)&&(s=r,f=a);function l(I,C,m,D,y){var M=I.many,L=I.one;if(M.length===1&&!y){var x=C?M[0]:L,T=C?L:M[0];if(dr(x))l({many:[x],one:T},!0,m,D,!0);else{var _=i?X({delay:i(m,D)},d):d;Ur(x,T,_),o(x,T,x,T,_)}}else for(var O=X({dividePath:Ce[n],individualDelay:i&&function(U,H,b,q){return i(U+m,D)}},d),N=C?Wa(M,L,O):Qa(L,M,O),G=N.fromIndividuals,S=N.toIndividuals,R=G.length,E=0;E<R;E++){var _=i?X({delay:i(E,R)},d):d;o(G[E],S[E],C?M[E]:I.one,C?I.one:M[E],_)}}for(var u=s?s===a:a.length>r.length,p=s?wa(f,s):wa(u?r:a,[u?a:r]),g=0,c=0;c<p.length;c++)g+=p[c].many.length;for(var h=0,c=0;c<p.length;c++)l(p[c],u,h,g),h+=p[c].many.length}function F(a){if(!a)return[];if(w(a)){for(var r=[],n=0;n<a.length;n++)r.push(F(a[n]));return r}var e=[];return a.traverse(function(t){t instanceof K&&!t.disableMorphing&&!t.invisible&&!t.ignore&&e.push(t)}),e}var ee=1e4,De=0,Ja=1,$a=2,_e=J();function Ee(a,r){for(var n=a.dimensions,e=0;e<n.length;e++){var t=a.getDimensionInfo(n[e]);if(t&&t.otherDims[r]===0)return n[e]}}function Ge(a,r,n){var e=a.getDimensionInfo(n),t=e&&e.ordinalMeta;if(e){var o=a.get(e.name,r);return t&&t.categories[o]||o+""}}function za(a,r,n,e){var t=e?"itemChildGroupId":"itemGroupId",o=Ee(a,t);if(o){var v=Ge(a,r,o);return v}var i=a.getRawDataItem(r),d=e?"childGroupId":"groupId";if(i&&i[d])return i[d]+"";if(!e)return n||a.getId(r)}function Ba(a){var r=[];return P(a,function(n){var e=n.data,t=n.dataGroupId;if(!(e.count()>ee))for(var o=e.getIndices(),v=0;v<o.length;v++)r.push({data:e,groupId:za(e,v,t,!1),childGroupId:za(e,v,t,!0),divide:n.divide,dataIndex:v})}),r}function kr(a,r,n){a.traverse(function(e){e instanceof K&&or(e,{style:{opacity:0}},r,{dataIndex:n,isFrom:!0})})}function ra(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function er(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function Pe(a,r,n){var e=ir("update",n,r);e&&a.traverse(function(t){if(t instanceof ga){var o=La(t);o&&t.animateFrom({style:o},e)}})}function Se(a,r){var n=a.length;if(n!==r.length)return!1;for(var e=0;e<n;e++){var t=a[e],o=r[e];if(t.data.getId(t.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}function te(a,r,n){var e=Ba(a),t=Ba(r);function o(m,D,y,M,L){(y||m)&&D.animateFrom({style:y&&y!==m?Yr(Yr({},y.style),m.style):m.style},L)}var v=!1,i=De,d=$(),s=$();e.forEach(function(m){m.groupId&&d.set(m.groupId,!0),m.childGroupId&&s.set(m.childGroupId,!0)});for(var f=0;f<t.length;f++){var l=t[f].groupId;if(s.get(l)){i=Ja;break}var u=t[f].childGroupId;if(u&&d.get(u)){i=$a;break}}function p(m,D){return function(y){var M=y.data,L=y.dataIndex;return D?M.getId(L):m?i===Ja?y.childGroupId:y.groupId:i===$a?y.childGroupId:y.groupId}}var g=Se(e,t),c={};if(!g)for(var f=0;f<t.length;f++){var h=t[f],I=h.data.getItemGraphicEl(h.dataIndex);I&&(c[I.id]=!0)}function C(m,D){var y=e[D],M=t[m],L=M.data.hostModel,x=y.data.getItemGraphicEl(y.dataIndex),T=M.data.getItemGraphicEl(M.dataIndex);if(x===T){T&&Pe(T,M.dataIndex,L);return}x&&c[x.id]||T&&(er(T),x?(er(x),ra(x),v=!0,Hr(F(x),F(T),M.divide,L,m,o)):kr(T,L,m))}new jr(e,t,p(!0,g),p(!1,g),null,"multiple").update(C).updateManyToOne(function(m,D){var y=t[m],M=y.data,L=M.hostModel,x=M.getItemGraphicEl(y.dataIndex),T=j(Y(D,function(_){return e[_].data.getItemGraphicEl(e[_].dataIndex)}),function(_){return _&&_!==x&&!c[_.id]});x&&(er(x),T.length?(P(T,function(_){er(_),ra(_)}),v=!0,Hr(F(T),F(x),y.divide,L,m,o)):kr(x,L,y.dataIndex))}).updateOneToMany(function(m,D){var y=e[D],M=y.data.getItemGraphicEl(y.dataIndex);if(!(M&&c[M.id])){var L=j(Y(m,function(T){return t[T].data.getItemGraphicEl(t[T].dataIndex)}),function(T){return T&&T!==M}),x=t[m[0]].data.hostModel;L.length&&(P(L,function(T){return er(T)}),M?(er(M),ra(M),v=!0,Hr(F(M),F(L),y.divide,x,m[0],o)):P(L,function(T){return kr(T,x,m[0])}))}}).updateManyToMany(function(m,D){new jr(D,m,function(y){return e[y].data.getId(e[y].dataIndex)},function(y){return t[y].data.getId(t[y].dataIndex)}).update(function(y,M){C(m[y],D[M])}).execute()}).execute(),v&&P(r,function(m){var D=m.data,y=D.hostModel,M=y&&n.getViewOfSeriesModel(y),L=ir("update",y,0);M&&y.isAnimationEnabled()&&L&&L.duration>0&&M.group.traverse(function(x){x instanceof K&&!x.animators.length&&x.animateFrom({style:{opacity:0}},L)})})}function ka(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function re(a){return w(a)?a.sort().join(","):a}function W(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function Re(a,r){var n=$(),e=$(),t=$();P(a.oldSeries,function(v,i){var d=a.oldDataGroupIds[i],s=a.oldData[i],f=ka(v),l=re(f);e.set(l,{dataGroupId:d,data:s}),w(f)&&P(f,function(u){t.set(u,{key:l,dataGroupId:d,data:s})})});function o(v){n.get(v)&&ha("Duplicated seriesKey in universalTransition "+v)}return P(r.updatedSeries,function(v){if(v.isUniversalTransitionEnabled()&&v.isAnimationEnabled()){var i=v.get("dataGroupId"),d=v.getData(),s=ka(v),f=re(s),l=e.get(f);if(l)n.set(f,{oldSeries:[{dataGroupId:l.dataGroupId,divide:W(l.data),data:l.data}],newSeries:[{dataGroupId:i,divide:W(d),data:d}]});else if(w(s)){var u=[];P(s,function(c){var h=e.get(c);h.data&&u.push({dataGroupId:h.dataGroupId,divide:W(h.data),data:h.data})}),u.length&&n.set(f,{oldSeries:u,newSeries:[{dataGroupId:i,data:d,divide:W(d)}]})}else{var p=t.get(s);if(p){var g=n.get(p.key);g||(g={oldSeries:[{dataGroupId:p.dataGroupId,data:p.data,divide:W(p.data)}],newSeries:[]},n.set(p.key,g)),g.newSeries.push({dataGroupId:i,data:d,divide:W(d)})}}}}),n}function ae(a,r){for(var n=0;n<a.length;n++){var e=r.seriesIndex!=null&&r.seriesIndex===a[n].seriesIndex||r.seriesId!=null&&r.seriesId===a[n].id;if(e)return n}}function Ae(a,r,n,e){var t=[],o=[];P(B(a.from),function(v){var i=ae(r.oldSeries,v);i>=0&&t.push({dataGroupId:r.oldDataGroupIds[i],data:r.oldData[i],divide:W(r.oldData[i]),groupIdDim:v.dimension})}),P(B(a.to),function(v){var i=ae(n.updatedSeries,v);if(i>=0){var d=n.updatedSeries[i].getData();o.push({dataGroupId:r.oldDataGroupIds[i],data:d,divide:W(d),groupIdDim:v.dimension})}}),t.length>0&&o.length>0&&te(t,o,e)}function fr(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,n,e){P(B(e.seriesTransition),function(t){P(B(t.to),function(o){for(var v=e.updatedSeries,i=0;i<v.length;i++)(o.seriesIndex!=null&&o.seriesIndex===v[i].seriesIndex||o.seriesId!=null&&o.seriesId===v[i].id)&&(v[i][yr]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,n,e){var t=_e(n);if(t.oldSeries&&e.updatedSeries&&e.optionChanged){var o=e.seriesTransition;if(o)P(B(o),function(p){Ae(p,t,e,n)});else{var v=Re(t,e);P(v.keys(),function(p){var g=v.get(p);te(g.oldSeries,g.newSeries,n)})}P(e.updatedSeries,function(p){p[yr]&&(p[yr]=!1)})}for(var i=r.getSeries(),d=t.oldSeries=[],s=t.oldDataGroupIds=[],f=t.oldData=[],l=0;l<i.length;l++){var u=i[l].getData();u.count()<ee&&(d.push(i[l]),s.push(i[l].get("dataGroupId")),f.push(u))}})}Mr([xr,Er,_r,Cr,Gr,Dr,vr,fr,Lr]);var br=class a{chartOption;ngOnInit(){this.chartOption={title:{top:30,left:"center",text:"Daily Step Count"},tooltip:{},visualMap:{min:0,max:1e4,type:"piecewise",orient:"horizontal",left:"center",top:65},calendar:{top:120,left:30,right:30,cellSize:["auto",13],range:"2016",itemStyle:{borderWidth:.5},yearLabel:{show:!1}},series:{type:"heatmap",coordinateSystem:"calendar",data:this.getVirtualData("2016")}}}getVirtualData(r){let n=+Tr.parse(r+"-01-01"),e=+Tr.parse(+r+1+"-01-01"),t=3600*24*1e3,o=[];for(let v=n;v<e;v+=t)o.push([Tr.format(v,"{yyyy}-{MM}-{dd}",!1),Math.floor(Math.random()*1e4)]);return o}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=ur({type:a,selectors:[["app-calendar-heatmap"]],features:[pr([hr({echarts:Ir})])],decls:1,vars:1,consts:[["echarts","",1,"demo-chart",3,"options"]],template:function(n,e){n&1&&tr(0,"div",0),n&2&&lr("options",e.chartOption)},dependencies:[cr],encapsulation:2,changeDetection:0})};Mr([xr,Er,_r,Cr,Gr,Dr,vr,fr,Lr]);var ne=class a{options;hours=["12a","1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12p","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p"];days=["Saturday","Friday","Thursday","Wednesday","Tuesday","Monday","Sunday"];data=[[0,0,5],[0,1,1],[0,2,0],[0,3,0],[0,4,0],[0,5,0],[0,6,0],[0,7,0],[0,8,0],[0,9,0],[0,10,0],[0,11,2],[0,12,4],[0,13,1],[0,14,1],[0,15,3],[0,16,4],[0,17,6],[0,18,4],[0,19,4],[0,20,3],[0,21,3],[0,22,2],[0,23,5],[1,0,7],[1,1,0],[1,2,0],[1,3,0],[1,4,0],[1,5,0],[1,6,0],[1,7,0],[1,8,0],[1,9,0],[1,10,5],[1,11,2],[1,12,2],[1,13,6],[1,14,9],[1,15,11],[1,16,6],[1,17,7],[1,18,8],[1,19,12],[1,20,5],[1,21,5],[1,22,7],[1,23,2],[2,0,1],[2,1,1],[2,2,0],[2,3,0],[2,4,0],[2,5,0],[2,6,0],[2,7,0],[2,8,0],[2,9,0],[2,10,3],[2,11,2],[2,12,1],[2,13,9],[2,14,8],[2,15,10],[2,16,6],[2,17,5],[2,18,5],[2,19,5],[2,20,7],[2,21,4],[2,22,2],[2,23,4],[3,0,7],[3,1,3],[3,2,0],[3,3,0],[3,4,0],[3,5,0],[3,6,0],[3,7,0],[3,8,1],[3,9,0],[3,10,5],[3,11,4],[3,12,7],[3,13,14],[3,14,13],[3,15,12],[3,16,9],[3,17,5],[3,18,5],[3,19,10],[3,20,6],[3,21,4],[3,22,4],[3,23,1],[4,0,1],[4,1,3],[4,2,0],[4,3,0],[4,4,0],[4,5,1],[4,6,0],[4,7,0],[4,8,0],[4,9,2],[4,10,4],[4,11,4],[4,12,2],[4,13,4],[4,14,4],[4,15,14],[4,16,12],[4,17,1],[4,18,8],[4,19,5],[4,20,3],[4,21,7],[4,22,3],[4,23,0],[5,0,2],[5,1,1],[5,2,0],[5,3,3],[5,4,0],[5,5,0],[5,6,0],[5,7,0],[5,8,2],[5,9,0],[5,10,4],[5,11,1],[5,12,5],[5,13,10],[5,14,5],[5,15,7],[5,16,11],[5,17,6],[5,18,0],[5,19,5],[5,20,3],[5,21,4],[5,22,2],[5,23,0],[6,0,1],[6,1,0],[6,2,0],[6,3,0],[6,4,0],[6,5,0],[6,6,0],[6,7,0],[6,8,0],[6,9,0],[6,10,1],[6,11,0],[6,12,2],[6,13,1],[6,14,3],[6,15,4],[6,16,0],[6,17,0],[6,18,0],[6,19,0],[6,20,1],[6,21,2],[6,22,2],[6,23,6]].map(function(r){return[r[1],r[0],r[2]||"-"]});ngOnInit(){this.options={tooltip:{position:"top"},grid:{height:"50%",top:"10%"},xAxis:{type:"category",data:this.hours,splitArea:{show:!0}},yAxis:{type:"category",data:this.days,splitArea:{show:!0}},visualMap:{min:0,max:10,calculable:!0,orient:"horizontal",left:"center",bottom:"15%"},series:[{name:"Punch Card",type:"heatmap",data:this.data,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=ur({type:a,selectors:[["app-heatmap"]],features:[pr([hr({echarts:Ir})])],decls:7,vars:1,consts:[[1,"grid","grid-cols-12","gap-8"],[1,"col-span-12","xl:col-span-12"],[1,"card"],["echarts","",1,"demo-chart",3,"options"]],template:function(n,e){n&1&&(Vr(0,"p-fluid",0)(1,"div",1)(2,"div",2),tr(3,"div",3),Xr()(),Vr(4,"div",1)(5,"div",2),tr(6,"app-calendar-heatmap"),Xr()()()),n&2&&(da(3),lr("options",e.options))},dependencies:[ua,fa,cr,br],encapsulation:2,changeDetection:0})};export{ne as HeatmapComponent};
