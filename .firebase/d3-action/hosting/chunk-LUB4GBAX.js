import{$ as j,$a as Qr,A as Dr,Aa as Jt,B as H,Ba as Zr,C as tt,Ca as de,D as Pr,Da as $t,E as jt,Ea as Xr,F as pt,G as Oe,Ga as Z,H as Cr,Ha as ot,I as ut,J as ke,Ja as Be,K as Mr,Ka as jr,L as se,La as Nt,M as ue,N as zr,Na as Ot,O as Er,Oa as xt,P as ce,Pa as $,Q as X,Qa as Lt,R as fe,Sa as Wr,T as Vr,Ta as qr,U as Rr,Ua as ye,V as Nr,Va as Kr,W as Or,Wa as Se,X as kr,Xa as Jr,Y as Wt,Ya as $r,Z as Gr,Za as be,_ as it,_a as Fe,aa as N,ab as ta,ba as ve,c as R,ca as Ur,cb as ft,d as Me,db as vt,e as O,eb as Tt,f as wr,fa as pe,fb as Qt,g as Zt,ga as he,gb as te,h as ze,ha as Br,hb as ea,i as G,ib as ra,j as K,ja as Fr,jb as mt,ka as Hr,kb as kt,l as _r,la as Yr,lb as Ie,m as Ee,ma as ct,n as rt,na as St,o as B,oa as Rt,p as yt,pa as Ge,q as st,qa as ht,r as at,ra as bt,s as Lr,sa as Ue,t as Ve,ta as It,tb as aa,u as Re,ua as qt,ub as ia,v as Vt,va as me,w as Tr,wa as ge,x as Xt,xa as J,y as Ar,ya as Kt,z as Ne}from"./chunk-XOTOSTGT.js";function He(a){var e=a.findComponents({mainType:"legend"});!e||!e.length||a.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getGraph(),o=i.data,n=r.mapArray(r.getName);o.filterSelf(function(l){var u=o.getItemModel(l),s=u.getShallow("category");if(s!=null){at(s)&&(s=n[s]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(s))return!1}return!0})})}function Ye(a){var e={};a.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getData(),o={};r.each(function(n){var l=r.getName(n);o["ec-"+l]=n;var u=r.getItemModel(n),s=u.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(l,e)),r.setItemVisual(n,"style",s);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++){var v=u.getShallow(c[f],!0);v!=null&&r.setItemVisual(n,c[f],v)}}),r.count()&&i.each(function(n){var l=i.getItemModel(n),u=l.getShallow("category");if(u!=null){st(u)&&(u=o["ec-"+u]);var s=r.getItemVisual(u,"style"),c=i.ensureUniqueItemVisual(n,"style");O(c,s);for(var f=["symbol","symbolSize","symbolKeepAspect"],v=0;v<f.length;v++)i.setItemVisual(n,f[v],r.getItemVisual(u,f[v]))}})})}function xe(a){return a instanceof Array||(a=[a,a]),a}function Ze(a){a.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),i=xe(e.get("edgeSymbol")),o=xe(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",o&&o[0]),r.setVisual("toSymbolSize",o&&o[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(n){var l=r.getItemModel(n),u=t.getEdgeByIndex(n),s=xe(l.getShallow("symbol",!0)),c=xe(l.getShallow("symbolSize",!0)),f=l.getModel("lineStyle").getLineStyle(),v=r.ensureUniqueItemVisual(n,"style");switch(O(v,f),v.stroke){case"source":{var p=u.node1.getVisual("style");v.stroke=p&&p.fill;break}case"target":{var p=u.node2.getVisual("style");v.stroke=p&&p.fill;break}}s[0]&&u.setVisual("fromSymbol",s[0]),s[1]&&u.setVisual("toSymbol",s[1]),c[0]&&u.setVisual("fromSymbolSize",c[0]),c[1]&&u.setVisual("toSymbolSize",c[1])})})}var Xe="-->",we=function(a){return a.get("autoCurveness")||null},oa=function(a,e){var t=we(a),r=20,i=[];if(at(t))r=t;else if(B(t)){a.__curvenessList=t;return}e>r&&(r=e);var o=r%2?r+2:r+3;i=[];for(var n=0;n<o;n++)i.push((n%2?n+1:n)/10*(n%2?-1:1));a.__curvenessList=i},ee=function(a,e,t){var r=[a.id,a.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[t.uid,r,i].join(Xe)},na=function(a){var e=a.split(Xe);return[e[0],e[2],e[1]].join(Xe)},vi=function(a,e){var t=ee(a.node1,a.node2,e);return e.__edgeMap[t]},pi=function(a,e){var t=je(ee(a.node1,a.node2,e),e),r=je(ee(a.node2,a.node1,e),e);return t+r},je=function(a,e){var t=e.__edgeMap;return t[a]?t[a].length:0};function la(a){we(a)&&(a.__curvenessList=[],a.__edgeMap={},oa(a))}function sa(a,e,t,r){if(we(t)){var i=ee(a,e,t),o=t.__edgeMap,n=o[na(i)];o[i]&&!n?o[i].isForward=!0:n&&o[i]&&(n.isForward=!0,o[i].isForward=!1),o[i]=o[i]||[],o[i].push(r)}}function Gt(a,e,t,r){var i=we(e),o=B(i);if(!i)return null;var n=vi(a,e);if(!n)return null;for(var l=-1,u=0;u<n.length;u++)if(n[u]===t){l=u;break}var s=pi(a,e);oa(e,s),a.lineStyle=a.lineStyle||{};var c=ee(a.node1,a.node2,e),f=e.__curvenessList,v=o||s%2?0:1;if(n.isForward)return f[v+l];var p=na(c),m=je(p,e),y=f[l+m+v];return r?o?i&&i[0]===0?(m+v)%2?y:-y:((m%2?0:1)+v)%2?y:-y:(m+v)%2?y:-y:f[l+m+v]}function _e(a){var e=a.coordinateSystem;if(!(e&&e.type!=="view")){var t=a.getGraph();t.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),re(t,a)}}function re(a,e){a.eachEdge(function(t,r){var i=Vt(t.getModel().get(["lineStyle","curveness"]),-Gt(t,e,r,!0),0),o=tt(t.node1.getLayout()),n=tt(t.node2.getLayout()),l=[o,n];+i&&l.push([(o[0]+n[0])/2-(o[1]-n[1])*i,(o[1]+n[1])/2-(n[0]-o[0])*i]),t.setLayout(l)})}function We(a,e){a.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&i.type!=="view"){var o=t.getData(),n=[];G(i.dimensions,function(v){n=n.concat(o.mapDimensionsAll(v))});for(var l=0;l<o.count();l++){for(var u=[],s=!1,c=0;c<n.length;c++){var f=o.get(n[c],l);isNaN(f)||(s=!0),u.push(f)}s?o.setItemLayout(l,i.dataToPoint(u)):o.setItemLayout(l,[NaN,NaN])}re(o.graph,t)}else(!r||r==="none")&&_e(t)})}function At(a){var e=a.coordinateSystem;if(e.type!=="view")return 1;var t=a.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),o=(i-1)*t+1;return o/r}function Dt(a){var e=a.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var ua=Math.PI,qe=[];function Ut(a,e,t,r){var i=a.coordinateSystem;if(!(i&&i.type!=="view")){var o=i.getBoundingRect(),n=a.getData(),l=n.graph,u=o.width/2+o.x,s=o.height/2+o.y,c=Math.min(o.width,o.height)/2,f=n.count();if(n.setLayout({cx:u,cy:s}),!!f){if(t){var v=i.pointToData(r),p=v[0],m=v[1],y=[p-u,m-s];ut(y,y),Cr(y,y,c),t.setLayout([u+y[0],s+y[1]],!0);var g=a.get(["circular","rotateLabel"]);Ke(t,g,u,s)}hi[e](a,l,n,c,u,s,f),l.eachEdge(function(S,d){var h=Vt(S.getModel().get(["lineStyle","curveness"]),Gt(S,a,d),0),x=tt(S.node1.getLayout()),b=tt(S.node2.getLayout()),I,L=(x[0]+b[0])/2,A=(x[1]+b[1])/2;+h&&(h*=3,I=[u*h+L*(1-h),s*h+A*(1-h)]),S.setLayout([x,b,I])})}}}var hi={value:function(a,e,t,r,i,o,n){var l=0,u=t.getSum("value"),s=Math.PI*2/(u||n);e.eachNode(function(c){var f=c.getValue("value"),v=s*(u?f:1)/2;l+=v,c.setLayout([r*Math.cos(l)+i,r*Math.sin(l)+o]),l+=v})},symbolSize:function(a,e,t,r,i,o,n){var l=0;qe.length=n;var u=At(a);e.eachNode(function(f){var v=Dt(f);isNaN(v)&&(v=2),v<0&&(v=0),v*=u;var p=Math.asin(v/2/r);isNaN(p)&&(p=ua/2),qe[f.dataIndex]=p,l+=p*2});var s=(2*ua-l)/n/2,c=0;e.eachNode(function(f){var v=s+qe[f.dataIndex];c+=v,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([r*Math.cos(c)+i,r*Math.sin(c)+o]),c+=v})}};function Ke(a,e,t,r){var i=a.getGraphicEl();if(i){var o=a.getModel(),n=o.get(["label","rotate"])||0,l=i.getSymbolPath();if(e){var u=a.getLayout(),s=Math.atan2(u[1]-r,u[0]-t);s<0&&(s=Math.PI*2+s);var c=u[0]<t;c&&(s=s-Math.PI);var f=c?"left":"right";l.setTextConfig({rotation:-s,position:f,origin:"center"});var v=l.ensureState("emphasis");O(v.textConfig||(v.textConfig={}),{position:f})}else l.setTextConfig({rotation:n*=Math.PI/180})}}function Je(a){a.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&Ut(e,"symbolSize")})}var Bt=jt;function ca(a,e,t){for(var r=a,i=e,o=t.rect,n=o.width,l=o.height,u=[o.x+n/2,o.y+l/2],s=t.gravity==null?.1:t.gravity,c=0;c<r.length;c++){var f=r[c];f.p||(f.p=Dr(n*(Math.random()-.5)+u[0],l*(Math.random()-.5)+u[1])),f.pp=tt(f.p),f.edges=null}var v=t.friction==null?.6:t.friction,p=v,m,y;return{warmUp:function(){p=v*.8},setFixed:function(g){r[g].fixed=!0},setUnfixed:function(g){r[g].fixed=!1},beforeStep:function(g){m=g},afterStep:function(g){y=g},step:function(g){m&&m(r,i);for(var S=[],d=r.length,h=0;h<i.length;h++){var x=i[h];if(!x.ignoreForceLayout){var b=x.n1,I=x.n2;pt(S,I.p,b.p);var L=Oe(S)-x.d,A=I.w/(b.w+I.w);isNaN(A)&&(A=0),ut(S,S),!b.fixed&&Bt(b.p,b.p,S,A*L*p),!I.fixed&&Bt(I.p,I.p,S,-(1-A)*L*p)}}for(var h=0;h<d;h++){var D=r[h];D.fixed||(pt(S,u,D.p),Bt(D.p,D.p,S,s*p))}for(var h=0;h<d;h++)for(var b=r[h],w=h+1;w<d;w++){var I=r[w];pt(S,I.p,b.p);var L=Oe(S);L===0&&(Pr(S,Math.random()-.5,Math.random()-.5),L=1);var T=(b.rep+I.rep)/L/L;!b.fixed&&Bt(b.pp,b.pp,S,T),!I.fixed&&Bt(I.pp,I.pp,S,-T)}for(var _=[],h=0;h<d;h++){var D=r[h];D.fixed||(pt(_,D.p,D.pp),Bt(D.p,D.p,_,p),H(D.pp,D.p))}p=p*.992;var P=p<.01;y&&y(r,i,P),g&&g(P)}}}function $e(a){a.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),o=i.data,n=i.edgeData,l=e.getModel("force"),u=l.get("initLayout");e.preservedPoints?o.each(function(h){var x=o.getId(h);o.setItemLayout(h,r[x]||[NaN,NaN])}):!u||u==="none"?_e(e):u==="circular"&&Ut(e,"value");var s=o.getDataExtent("value"),c=n.getDataExtent("value"),f=l.get("repulsion"),v=l.get("edgeLength"),p=B(f)?f:[f,f],m=B(v)?v:[v,v];m=[m[1],m[0]];var y=o.mapArray("value",function(h,x){var b=o.getItemLayout(x),I=j(h,s,p);return isNaN(I)&&(I=(p[0]+p[1])/2),{w:I,rep:I,fixed:o.getItemModel(x).get("fixed"),p:!b||isNaN(b[0])||isNaN(b[1])?null:b}}),g=n.mapArray("value",function(h,x){var b=i.getEdgeByIndex(x),I=j(h,c,m);isNaN(I)&&(I=(m[0]+m[1])/2);var L=b.getModel(),A=Vt(b.getModel().get(["lineStyle","curveness"]),-Gt(b,e,x,!0),0);return{n1:y[b.node1.dataIndex],n2:y[b.node2.dataIndex],d:I,curveness:A,ignoreForceLayout:L.get("ignoreForceLayout")}}),S=t.getBoundingRect(),d=ca(y,g,{rect:S,gravity:l.get("gravity"),friction:l.get("friction")});d.beforeStep(function(h,x){for(var b=0,I=h.length;b<I;b++)h[b].fixed&&H(h[b].p,i.getNodeByIndex(b).getLayout())}),d.afterStep(function(h,x,b){for(var I=0,L=h.length;I<L;I++)h[I].fixed||i.getNodeByIndex(I).setLayout(h[I].p),r[o.getId(I)]=h[I].p;for(var I=0,L=x.length;I<L;I++){var A=x[I],D=i.getEdgeByIndex(I),w=A.n1.p,T=A.n2.p,_=D.getLayout();_=_?_.slice():[],_[0]=_[0]||[],_[1]=_[1]||[],H(_[0],w),H(_[1],T),+A.curveness&&(_[2]=[(w[0]+T[0])/2-(w[1]-T[1])*A.curveness,(w[1]+T[1])/2-(T[0]-w[0])*A.curveness]),D.setLayout(_)}}),e.forceLayout=d,e.preservedPoints=r,d.step()}else e.forceLayout=null})}var fa=ue,mi=function(a){R(e,a);function e(t){var r=a.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Wt,r._rawTransformable=new Wt,r.name=t,r}return e.prototype.setBoundingRect=function(t,r,i,o){return this._rect=new fe(t,r,i,o),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,i,o){this._transformTo(t,r,i,o),this._viewRect=new fe(t,r,i,o)},e.prototype._transformTo=function(t,r,i,o){var n=this.getBoundingRect(),l=this._rawTransformable;l.transform=n.calculateTransform(new fe(t,r,i,o));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,this._updateTransform()},e.prototype.setCenter=function(t,r){t&&(this._center=[N(t[0],r.getWidth()),N(t[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,i=t.y+t.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),n=this.getZoom();o=ue([],o,t),i=ue([],i,t),r.originX=o[0],r.originY=o[1],r.x=i[0]-o[0],r.y=i[1]-o[1],r.scaleX=r.scaleY=n,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),Er(this.transform||(this.transform=[]),r.transform||zr()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],ce(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new Wt;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,i){var o=r?this._rawTransform:this.transform;return i=i||[],o?fa(i,t,o):H(i,t)},e.prototype.pointToData=function(t){var r=this.invTransform;return r?fa([],t,r):[t[0],t[1]]},e.prototype.convertToPixel=function(t,r,i){var o=va(r);return o===this?o.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var o=va(r);return o===this?o.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(Wt);function va(a){var e=a.seriesModel;return e?e.coordinateSystem:null}var Le=mi;function gi(a,e,t){var r=O(a.getBoxLayoutParams(),{aspect:t});return Se(r,{width:e.getWidth(),height:e.getHeight()})}function Qe(a,e){var t=[];return a.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var o=r.getData(),n=o.mapArray(function(g){var S=o.getItemModel(g);return[+S.get("x"),+S.get("y")]}),l=[],u=[];Fr(n,l,u),u[0]-l[0]===0&&(u[0]+=1,l[0]-=1),u[1]-l[1]===0&&(u[1]+=1,l[1]-=1);var s=(u[0]-l[0])/(u[1]-l[1]),c=gi(r,e,s);isNaN(s)&&(l=[c.x,c.y],u=[c.x+c.width,c.y+c.height]);var f=u[0]-l[0],v=u[1]-l[1],p=c.width,m=c.height,y=r.coordinateSystem=new Le;y.zoomLimit=r.get("scaleLimit"),y.setBoundingRect(l[0],l[1],f,v),y.setViewRect(c.x,c.y,p,m),y.setCenter(r.get("center"),e),y.setZoom(r.get("zoom")),t.push(y)}}),t}function pa(a,e){var t=a.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=Fe(a,e,t[0]);return i!=null?i+"":null}else if(r){for(var o=[],n=0;n<t.length;n++)o.push(Fe(a,e,t[n]));return o.join(" ")}}var di=function(a){R(e,a);function e(t,r,i,o){var n=a.call(this)||this;return n.updateData(t,r,i,o),n}return e.prototype._createSymbol=function(t,r,i,o,n){this.removeAll();var l=Tt(t,-1,-1,2,2,null,n);l.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),l.drift=yi,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){me(this.childAt(0))},e.prototype.downplay=function(){ge(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,o){this.silent=!1;var n=t.getItemVisual(r,"symbol")||"circle",l=t.hostModel,u=e.getSymbolSize(t,r),s=n!==this._symbolType,c=o&&o.disableAnimation;if(s){var f=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(n,t,r,u,f)}else{var v=this.childAt(0);v.silent=!1;var p={scaleX:u[0]/2,scaleY:u[1]/2};c?v.attr(p):Z(v,p,l,r),Nt(v)}if(this._updateCommon(t,r,u,i,o),s){var v=this.childAt(0);if(!c){var p={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}};v.scaleX=v.scaleY=0,v.style.opacity=0,ot(v,p,l,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,o,n){var l=this.childAt(0),u=t.hostModel,s,c,f,v,p,m,y,g,S;if(o&&(s=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,v=o.focus,p=o.blurScope,y=o.labelStatesModels,g=o.hoverScale,S=o.cursorStyle,m=o.emphasisDisabled),!o||t.hasItemOption){var d=o&&o.itemModel?o.itemModel:t.getItemModel(r),h=d.getModel("emphasis");s=h.getModel("itemStyle").getItemStyle(),f=d.getModel(["select","itemStyle"]).getItemStyle(),c=d.getModel(["blur","itemStyle"]).getItemStyle(),v=h.get("focus"),p=h.get("blurScope"),m=h.get("disabled"),y=$(d),g=h.getShallow("scale"),S=d.getShallow("cursor")}var x=t.getItemVisual(r,"symbolRotate");l.attr("rotation",(x||0)*Math.PI/180||0);var b=te(t.getItemVisual(r,"symbolOffset"),i);b&&(l.x=b[0],l.y=b[1]),S&&l.attr("cursor",S);var I=t.getItemVisual(r,"style"),L=I.fill;if(l instanceof Rt){var A=l.style;l.useStyle(O({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},I))}else l.__isEmptyBrush?l.useStyle(O({},I)):l.useStyle(I),l.style.decal=null,l.setColor(L,n&&n.symbolInnerColor),l.style.strokeNoScale=!0;var D=t.getItemVisual(r,"liftZ"),w=this._z2;D!=null?w==null&&(this._z2=l.z2,l.z2+=D):w!=null&&(l.z2=w,this._z2=null);var T=n&&n.useNameLabel;xt(l,y,{labelFetcher:u,labelDataIndex:r,defaultText:_,inheritColor:L,defaultOpacity:I.opacity});function _(z){return T?t.getName(z):pa(t,z)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var P=l.ensureState("emphasis");P.style=s,l.ensureState("select").style=f,l.ensureState("blur").style=c;var E=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;P.scaleX=this._sizeX*E,P.scaleY=this._sizeY*E,this.setSymbolScale(1),J(this,v,p,m)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var o=this.childAt(0),n=bt(this).dataIndex,l=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var u=o.getTextContent();u&&Be(u,{style:{opacity:0}},r,{dataIndex:n,removeOpt:l,cb:function(){o.removeTextContent()}})}else o.removeTextContent();Be(o,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:n,cb:t,removeOpt:l})},e.getSymbolSize=function(t,r){return Qt(t.getItemVisual(r,"symbolSize"))},e}(it);function yi(a,e){this.parent.drift(a,e)}var ha=di;function tr(a,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&a.getItemVisual(t,"symbol")!=="none"}function ma(a){return a!=null&&!Lr(a)&&(a={isIgnore:a}),a||{}}function ga(a){var e=a.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:$(e),cursorStyle:e.get("cursor")}}var Si=function(){function a(e){this.group=new it,this._SymbolCtor=e||ha}return a.prototype.updateData=function(e,t){this._progressiveEls=null,t=ma(t);var r=this.group,i=e.hostModel,o=this._data,n=this._SymbolCtor,l=t.disableAnimation,u=ga(e),s={disableAnimation:l},c=t.getSymbolPoint||function(f){return e.getItemLayout(f)};o||r.removeAll(),e.diff(o).add(function(f){var v=c(f);if(tr(e,v,f,t)){var p=new n(e,f,u,s);p.setPosition(v),e.setItemGraphicEl(f,p),r.add(p)}}).update(function(f,v){var p=o.getItemGraphicEl(v),m=c(f);if(!tr(e,m,f,t)){r.remove(p);return}var y=e.getItemVisual(f,"symbol")||"circle",g=p&&p.getSymbolType&&p.getSymbolType();if(!p||g&&g!==y)r.remove(p),p=new n(e,f,u,s),p.setPosition(m);else{p.updateData(e,f,u,s);var S={x:m[0],y:m[1]};l?p.attr(S):Z(p,S,i)}r.add(p),e.setItemGraphicEl(f,p)}).remove(function(f){var v=o.getItemGraphicEl(f);v&&v.fadeOut(function(){r.remove(v)},i)}).execute(),this._getSymbolPoint=c,this._data=e},a.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var o=e._getSymbolPoint(i);r.setPosition(o),r.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=ga(e),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=ma(r);function i(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var o=e.start;o<e.end;o++){var n=t.getItemLayout(o);if(tr(t,n,o,r)){var l=new this._SymbolCtor(t,o,this._seriesScope);l.traverse(i),l.setPosition(n),this.group.add(l),t.setItemGraphicEl(o,l),this._progressiveEls.push(l)}}},a.prototype.eachRendered=function(e){Ot(this._progressiveEls||this.group,e)},a.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},a}(),da=Si;var ya=$t.prototype,er=Xr.prototype,Sa=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),Dn=function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e}(Sa);function rr(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var bi=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Sa},e.prototype.buildPath=function(t,r){rr(r)?ya.buildPath.call(this,t,r):er.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return rr(this.shape)?ya.pointAt.call(this,t):er.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=rr(r)?[r.x2-r.x1,r.y2-r.y1]:er.tangentAt.call(this,t);return ut(i,i)},e}(St),ba=bi;var ar=["fromSymbol","toSymbol"];function Ia(a){return"_"+a+"Type"}function xa(a,e,t){var r=e.getItemVisual(t,a);if(!r||r==="none")return r;var i=e.getItemVisual(t,a+"Size"),o=e.getItemVisual(t,a+"Rotate"),n=e.getItemVisual(t,a+"Offset"),l=e.getItemVisual(t,a+"KeepAspect"),u=Qt(i),s=te(n||0,u);return r+u+s+(o||"")+(l||"")}function wa(a,e,t){var r=e.getItemVisual(t,a);if(!(!r||r==="none")){var i=e.getItemVisual(t,a+"Size"),o=e.getItemVisual(t,a+"Rotate"),n=e.getItemVisual(t,a+"Offset"),l=e.getItemVisual(t,a+"KeepAspect"),u=Qt(i),s=te(n||0,u),c=Tt(r,-u[0]/2+s[0],-u[1]/2+s[1],u[0],u[1],null,l);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=a,c}}function Ii(a){var e=new ba({name:"line",subPixelOptimize:!0});return ir(e.shape,a),e}function ir(a,e){a.x1=e[0][0],a.y1=e[0][1],a.x2=e[1][0],a.y2=e[1][1],a.percent=1;var t=e[2];t?(a.cpx1=t[0],a.cpy1=t[1]):(a.cpx1=NaN,a.cpy1=NaN)}var xi=function(a){R(e,a);function e(t,r,i){var o=a.call(this)||this;return o._createLine(t,r,i),o}return e.prototype._createLine=function(t,r,i){var o=t.hostModel,n=t.getItemLayout(r),l=Ii(n);l.shape.percent=0,ot(l,{shape:{percent:1}},o,r),this.add(l),G(ar,function(u){var s=wa(u,t,r);this.add(s),this[Ia(u)]=xa(u,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var o=t.hostModel,n=this.childOfName("line"),l=t.getItemLayout(r),u={shape:{}};ir(u.shape,l),Z(n,u,o,r),G(ar,function(s){var c=xa(s,t,r),f=Ia(s);if(this[f]!==c){this.remove(this.childOfName(s));var v=wa(s,t,r);this.add(v)}this[f]=c},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var o=t.hostModel,n=this.childOfName("line"),l=i&&i.emphasisLineStyle,u=i&&i.blurLineStyle,s=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,v=i&&i.focus,p=i&&i.blurScope;if(!i||t.hasItemOption){var m=t.getItemModel(r),y=m.getModel("emphasis");l=y.getModel("lineStyle").getLineStyle(),u=m.getModel(["blur","lineStyle"]).getLineStyle(),s=m.getModel(["select","lineStyle"]).getLineStyle(),f=y.get("disabled"),v=y.get("focus"),p=y.get("blurScope"),c=$(m)}var g=t.getItemVisual(r,"style"),S=g.stroke;n.useStyle(g),n.style.fill=null,n.style.strokeNoScale=!0,n.ensureState("emphasis").style=l,n.ensureState("blur").style=u,n.ensureState("select").style=s,G(ar,function(I){var L=this.childOfName(I);if(L){L.setColor(S),L.style.opacity=g.opacity;for(var A=0;A<It.length;A++){var D=It[A],w=n.getState(D);if(w){var T=w.style||{},_=L.ensureState(D),P=_.style||(_.style={});T.stroke!=null&&(P[L.__isEmptyBrush?"stroke":"fill"]=T.stroke),T.opacity!=null&&(P.opacity=T.opacity)}}L.markRedraw()}},this);var d=o.getRawValue(r);xt(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(I,L){return o.getFormattedLabel(I,L,t.dataType)}},inheritColor:S||"#000",defaultOpacity:g.opacity,defaultText:(d==null?t.getName(r):isFinite(d)?ve(d):d)+""});var h=this.getTextContent();if(h){var x=c.normal;h.__align=h.style.align,h.__verticalAlign=h.style.verticalAlign,h.__position=x.get("position")||"middle";var b=x.get("distance");B(b)||(b=[b,b]),h.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),J(this,v,p,f)},e.prototype.highlight=function(){me(this)},e.prototype.downplay=function(){ge(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");ir(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),o=t.getTextContent();if(!r&&!i&&(!o||o.ignore))return;for(var n=1,l=this.parent;l;)l.scaleX&&(n/=l.scaleX),l=l.parent;var u=t.childOfName("line");if(!this.__dirty&&!u.__dirty)return;var s=u.shape.percent,c=u.pointAt(0),f=u.pointAt(s),v=pt([],f,c);ut(v,v);function p(w,T){var _=w.__specifiedRotation;if(_==null){var P=u.tangentAt(T);w.attr("rotation",(T===1?-1:1)*Math.PI/2-Math.atan2(P[1],P[0]))}else w.attr("rotation",_)}if(r&&(r.setPosition(c),p(r,0),r.scaleX=r.scaleY=n*s,r.markRedraw()),i&&(i.setPosition(f),p(i,1),i.scaleX=i.scaleY=n*s,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var m=void 0,y=void 0,g=o.__labelDistance,S=g[0]*n,d=g[1]*n,h=s/2,x=u.tangentAt(h),b=[x[1],-x[0]],I=u.pointAt(h);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var L=x[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var A=-Math.atan2(x[1],x[0]);f[0]<c[0]&&(A=Math.PI+A),o.rotation=A}var D=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":D=-d,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":D=d,y="top";break;default:D=0,y="middle"}switch(o.__position){case"end":o.x=v[0]*S+f[0],o.y=v[1]*d+f[1],m=v[0]>.8?"left":v[0]<-.8?"right":"center",y=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":o.x=-v[0]*S+c[0],o.y=-v[1]*d+c[1],m=v[0]>.8?"right":v[0]<-.8?"left":"center",y=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=S*L+c[0],o.y=c[1]+D,m=x[0]<0?"right":"left",o.originX=-S*L,o.originY=-D;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=I[0],o.y=I[1]+D,m="center",o.originY=-D;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-S*L+f[0],o.y=f[1]+D,m=x[0]>=0?"right":"left",o.originX=S*L,o.originY=-D;break}o.scaleX=o.scaleY=n,o.setStyle({verticalAlign:o.__verticalAlign||y,align:o.__align||m})}},e}(it),_a=xi;var wi=function(){function a(e){this.group=new it,this._LineCtor=e||_a}return a.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,o=r._lineData;r._lineData=e,o||i.removeAll();var n=La(e);e.diff(o).add(function(l){t._doAdd(e,l,n)}).update(function(l,u){t._doUpdate(o,e,u,l,n)}).remove(function(l){i.remove(o.getItemGraphicEl(l))}).execute()},a.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=La(e),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(l){!l.isGroup&&!_i(l)&&(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var o=t.getItemLayout(i);if(or(o)){var n=new this._LineCtor(t,i,this._seriesScope);n.traverse(r),this.group.add(n),t.setItemGraphicEl(i,n),this._progressiveEls.push(n)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(e){Ot(this._progressiveEls||this.group,e)},a.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(or(i)){var o=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,o),this.group.add(o)}},a.prototype._doUpdate=function(e,t,r,i,o){var n=e.getItemGraphicEl(r);if(!or(t.getItemLayout(i))){this.group.remove(n);return}n?n.updateData(t,i,o):n=new this._LineCtor(t,i,o),t.setItemGraphicEl(i,n),this.group.add(n)},a}();function _i(a){return a.animators&&a.animators.length>0}function La(a){var e=a.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:$(e)}}function Ta(a){return isNaN(a[0])||isNaN(a[1])}function or(a){return a&&!Ta(a[0])&&!Ta(a[1])}var Aa=wi;function Da(a,e,t){var r=a.target;r.x+=e,r.y+=t,r.dirty()}function Pa(a,e,t,r){var i=a.target,o=a.zoomLimit,n=a.zoom=a.zoom||1;if(n*=e,o){var l=o.min||0,u=o.max||1/0;n=Math.max(Math.min(u,n),l)}var s=n/a.zoom;a.zoom=n,i.x-=(t-i.x)*(s-1),i.y-=(r-i.y)*(s-1),i.scaleX*=s,i.scaleY*=s,i.dirty()}var nr=[],lr=[],sr=[],Ft=Rr,ur=Mr,Ca=Math.abs;function Ma(a,e,t){for(var r=a[0],i=a[1],o=a[2],n=1/0,l,u=t*t,s=.1,c=.1;c<=.9;c+=.1){nr[0]=Ft(r[0],i[0],o[0],c),nr[1]=Ft(r[1],i[1],o[1],c);var f=Ca(ur(nr,e)-u);f<n&&(n=f,l=c)}for(var v=0;v<32;v++){var p=l+s;lr[0]=Ft(r[0],i[0],o[0],l),lr[1]=Ft(r[1],i[1],o[1],l),sr[0]=Ft(r[0],i[0],o[0],p),sr[1]=Ft(r[1],i[1],o[1],p);var f=ur(lr,e)-u;if(Ca(f)<.01)break;var m=ur(sr,e)-u;s/=2,f<0?m>=0?l=l+s:l=l-s:m>=0?l=l-s:l=l+s}return l}function ae(a,e){var t=[],r=Nr,i=[[],[],[]],o=[[],[]],n=[];e/=2,a.eachEdge(function(l,u){var s=l.getLayout(),c=l.getVisual("fromSymbol"),f=l.getVisual("toSymbol");s.__original||(s.__original=[tt(s[0]),tt(s[1])],s[2]&&s.__original.push(tt(s[2])));var v=s.__original;if(s[2]!=null){if(H(i[0],v[0]),H(i[1],v[2]),H(i[2],v[1]),c&&c!=="none"){var p=Dt(l.node1),m=Ma(i,v[0],p*e);r(i[0][0],i[1][0],i[2][0],m,t),i[0][0]=t[3],i[1][0]=t[4],r(i[0][1],i[1][1],i[2][1],m,t),i[0][1]=t[3],i[1][1]=t[4]}if(f&&f!=="none"){var p=Dt(l.node2),m=Ma(i,v[1],p*e);r(i[0][0],i[1][0],i[2][0],m,t),i[1][0]=t[1],i[2][0]=t[2],r(i[0][1],i[1][1],i[2][1],m,t),i[1][1]=t[1],i[2][1]=t[2]}H(s[0],i[0]),H(s[1],i[2]),H(s[2],i[1])}else{if(H(o[0],v[0]),H(o[1],v[1]),pt(n,o[1],o[0]),ut(n,n),c&&c!=="none"){var p=Dt(l.node1);jt(o[0],o[0],n,p*e)}if(f&&f!=="none"){var p=Dt(l.node2);jt(o[1],o[1],n,-p*e)}H(s[0],o[0]),H(s[1],o[1])}})}function za(a){return a.type==="view"}var Ti=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var i=new da,o=new Aa,n=this.group;this._controller=new aa(r.getZr()),this._controllerHost={target:n},n.add(i.group),n.add(o.group),this._symbolDraw=i,this._lineDraw=o,this._firstRender=!0},e.prototype.render=function(t,r,i){var o=this,n=t.coordinateSystem;this._model=t;var l=this._symbolDraw,u=this._lineDraw,s=this.group;if(za(n)){var c={x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY};this._firstRender?s.attr(c):Z(s,c,t)}ae(t.getGraph(),At(t));var f=t.getData();l.updateData(f);var v=t.getEdgeData();u.updateData(v),this._updateNodeAndLinkScale(),this._updateController(t,r,i),clearTimeout(this._layoutTimeout);var p=t.forceLayout,m=t.get(["force","layoutAnimation"]);p&&this._startForceLayoutIteration(p,m);var y=t.get("layout");f.graph.eachNode(function(h){var x=h.dataIndex,b=h.getGraphicEl(),I=h.getModel();if(b){b.off("drag").off("dragend");var L=I.get("draggable");L&&b.on("drag",function(D){switch(y){case"force":p.warmUp(),!o._layouting&&o._startForceLayoutIteration(p,m),p.setFixed(x),f.setItemLayout(x,[b.x,b.y]);break;case"circular":f.setItemLayout(x,[b.x,b.y]),h.setLayout({fixed:!0},!0),Ut(t,"symbolSize",h,[D.offsetX,D.offsetY]),o.updateLayout(t);break;case"none":default:f.setItemLayout(x,[b.x,b.y]),re(t.getGraph(),t),o.updateLayout(t);break}}).on("dragend",function(){p&&p.setUnfixed(x)}),b.setDraggable(L,!!I.get("cursor"));var A=I.get(["emphasis","focus"]);A==="adjacency"&&(bt(b).focus=h.getAdjacentDataIndices())}}),f.graph.eachEdge(function(h){var x=h.getGraphicEl(),b=h.getModel().get(["emphasis","focus"]);x&&b==="adjacency"&&(bt(x).focus={edge:[h.dataIndex],node:[h.node1.dataIndex,h.node2.dataIndex]})});var g=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),S=f.getLayout("cx"),d=f.getLayout("cy");f.graph.eachNode(function(h){Ke(h,g,S,d)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r){var i=this;(function o(){t.step(function(n){i.updateLayout(i._model),(i._layouting=!n)&&(r?i._layoutTimeout=setTimeout(o,16):o())})})()},e.prototype._updateController=function(t,r,i){var o=this,n=this._controller,l=this._controllerHost,u=this.group;if(n.setPointerChecker(function(s,c,f){var v=u.getBoundingRect();return v.applyTransform(u.transform),v.contain(c,f)&&!ia(s,i,t)}),!za(t.coordinateSystem)){n.disable();return}n.enable(t.get("roam")),l.zoomLimit=t.get("scaleLimit"),l.zoom=t.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",function(s){Da(l,s.dx,s.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:s.dx,dy:s.dy})}).on("zoom",function(s){Pa(l,s.scale,s.originX,s.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:s.scale,originX:s.originX,originY:s.originY}),o._updateNodeAndLinkScale(),ae(t.getGraph(),At(t)),o._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=At(t);r.eachItemGraphicEl(function(o,n){o&&o.setSymbolScale(i)})},e.prototype.updateLayout=function(t){ae(t.getGraph(),At(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(vt),Ea=Ti;function Ht(a){return"_EC_"+a}var Ai=function(){function a(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[Ht(e)]){var i=new Pt(e,t);return i.hostGraph=this,this.nodes.push(i),r[Ht(e)]=i,i}},a.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},a.prototype.getNodeById=function(e){return this._nodesMap[Ht(e)]},a.prototype.addEdge=function(e,t,r){var i=this._nodesMap,o=this._edgesMap;if(at(e)&&(e=this.nodes[e]),at(t)&&(t=this.nodes[t]),e instanceof Pt||(e=i[Ht(e)]),t instanceof Pt||(t=i[Ht(t)]),!(!e||!t)){var n=e.id+"-"+t.id,l=new Va(e,t,r);return l.hostGraph=this,this._directed&&(e.outEdges.push(l),t.inEdges.push(l)),e.edges.push(l),e!==t&&t.edges.push(l),this.edges.push(l),o[n]=l,l}},a.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},a.prototype.getEdge=function(e,t){e instanceof Pt&&(e=e.id),t instanceof Pt&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},a.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,o=0;o<i;o++)r[o].dataIndex>=0&&e.call(t,r[o],o)},a.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,o=0;o<i;o++)r[o].dataIndex>=0&&r[o].node1.dataIndex>=0&&r[o].node2.dataIndex>=0&&e.call(t,r[o],o)},a.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof Pt||(t=this._nodesMap[Ht(t)]),!!t){for(var o=r==="out"?"outEdges":r==="in"?"inEdges":"edges",n=0;n<this.nodes.length;n++)this.nodes[n].__visited=!1;if(!e.call(i,t,null))for(var l=[t];l.length;)for(var u=l.shift(),s=u[o],n=0;n<s.length;n++){var c=s[n],f=c.node1===u?c.node2:c.node1;if(!f.__visited){if(e.call(i,f,u))return;l.push(f),f.__visited=!0}}}},a.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,o=0,n=r.length;o<n;o++)r[o].dataIndex=-1;for(var o=0,n=e.count();o<n;o++)r[e.getRawIndex(o)].dataIndex=o;t.filterSelf(function(l){var u=i[t.getRawIndex(l)];return u.node1.dataIndex>=0&&u.node2.dataIndex>=0});for(var o=0,n=i.length;o<n;o++)i[o].dataIndex=-1;for(var o=0,n=t.count();o<n;o++)i[t.getRawIndex(o)].dataIndex=o},a.prototype.clone=function(){for(var e=new a(this._directed),t=this.nodes,r=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(var i=0;i<r.length;i++){var o=r[i];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},a}(),Pt=function(){function a(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},a.prototype.getTrajectoryDataIndices=function(){for(var e=Xt(),t=Xt(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var o=[i.node1],n=[i.node2],l=0;l<o.length;){var u=o[l];l++,t.set(u.dataIndex,!0);for(var s=0;s<u.inEdges.length;s++)e.set(u.inEdges[s].dataIndex,!0),o.push(u.inEdges[s].node1)}for(l=0;l<n.length;){var c=n[l];l++,t.set(c.dataIndex,!0);for(var s=0;s<c.outEdges.length;s++)e.set(c.outEdges[s].dataIndex,!0),n.push(c.outEdges[s].node2)}}}return{edge:e.keys(),node:t.keys()}},a}(),Va=function(){function a(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var e=Xt(),t=Xt();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],o=0;o<r.length;){var n=r[o];o++,t.set(n.dataIndex,!0);for(var l=0;l<n.inEdges.length;l++)e.set(n.inEdges[l].dataIndex,!0),r.push(n.inEdges[l].node1)}for(o=0;o<i.length;){var u=i[o];o++,t.set(u.dataIndex,!0);for(var l=0;l<u.outEdges.length;l++)e.set(u.outEdges[l].dataIndex,!0),i.push(u.outEdges[l].node2)}return{edge:e.keys(),node:t.keys()}},a}();function Ra(a,e){return{getValue:function(t){var r=this[a][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[a][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[a][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[a][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[a][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][e].getRawIndex(this.dataIndex)}}}ze(Pt,Ra("hostGraph","data"));ze(Va,Ra("hostGraph","edgeData"));var Na=Ai;var et=Br();function Di(a){var e=a.mainData,t=a.datas;t||(t={main:e},a.datasAttr={main:"data"}),a.datas=a.mainData=null,Oa(e,t,a),G(t,function(r){G(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,rt(Pi,a))})}),e.wrapMethod("cloneShallow",rt(Mi,a)),G(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,rt(Ci,a))}),Tr(t[e.dataType]===e)}function Pi(a,e){if(Vi(this)){var t=O({},et(this).datas);t[this.dataType]=e,Oa(e,t,a)}else cr(e,this.dataType,et(this).mainData,a);return e}function Ci(a,e){return a.struct&&a.struct.update(),e}function Mi(a,e){return G(et(e).datas,function(t,r){t!==e&&cr(t.cloneShallow(),r,e,a)}),e}function zi(a){var e=et(this).mainData;return a==null||e==null?e:et(e).datas[a]}function Ei(){var a=et(this).mainData;return a==null?[{data:a}]:K(_r(et(a).datas),function(e){return{type:e,data:et(a).datas[e]}})}function Vi(a){return et(a).mainData===a}function Oa(a,e,t){et(a).datas={},G(e,function(r,i){cr(r,i,a,t)})}function cr(a,e,t,r){et(t).datas[e]=a,et(a).mainData=t,a.dataType=e,r.struct&&(a[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=a),a.getLinkedData=zi,a.getLinkedDataAll=Ei}var Te=Di;function fr(a,e,t,r,i){for(var o=new Na(r),n=0;n<a.length;n++)o.addNode(Ve(a[n].id,a[n].name,n),n);for(var l=[],u=[],s=0,n=0;n<e.length;n++){var c=e[n],f=c.source,v=c.target;o.addEdge(f,v,s)&&(u.push(c),l.push(Ve(he(c.id,null),f+" > "+v)),s++)}var p=t.get("coordinateSystem"),m;if(p==="cartesian2d"||p==="polar")m=Ie(a,t);else{var y=be.get(p),g=y?y.dimensions||[]:[];Zt(g,"value")<0&&g.concat(["value"]);var S=kt(a,{coordDimensions:g,encodeDefine:t.getEncode()}).dimensions;m=new mt(S,t),m.initData(a)}var d=new mt(["value"],t);return d.initData(u,l),i&&i(m,d),Te({mainData:m,struct:o,structAttr:"graph",datas:{node:m,edge:d},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var Ri=function(){function a(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return a.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},a.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},a.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},a.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},a}(),Ae=Ri;var Ni=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new Ae(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){a.prototype.mergeDefaultAndTheme.apply(this,arguments),pe(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],o=t.data||t.nodes||[],n=this;if(o&&i){la(this);var l=fr(o,i,this,!0,u);return G(l.edges,function(s){sa(s.node1,s.node2,this,s.dataIndex)},this),l.data}function u(s,c){s.wrapMethod("getItemModel",function(m){var y=n._categoriesModels,g=m.getShallow("category"),S=y[g];return S&&(S.parentModel=m.parentModel,m.parentModel=S),m});var f=ye.prototype.getModel;function v(m,y){var g=f.call(this,m,y);return g.resolveParentPath=p,g}c.wrapMethod("getItemModel",function(m){return m.resolveParentPath=p,m.getModel=v,m});function p(m){if(m&&(m[0]==="label"||m[1]==="label")){var y=m.slice();return m[0]==="label"?y[0]="edgeLabel":m[1]==="label"&&(y[1]="edgeLabel"),y}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,i){if(i==="edge"){var o=this.getData(),n=this.getDataParams(t,i),l=o.graph.getEdgeByIndex(t),u=o.getName(l.node1.dataIndex),s=o.getName(l.node2.dataIndex),c=[];return u!=null&&c.push(u),s!=null&&c.push(s),Qr("nameValue",{name:c.join(" > "),value:n.value,noValue:n.value==null})}var f=ta({series:this,dataIndex:t,multipleSeries:r});return f},e.prototype._updateCategoriesData=function(){var t=K(this.option.categories||[],function(i){return i.value!=null?i:O({value:0},i)}),r=new mt(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ft),ka=Ni;function Ga(a,e){return a.pointToProjected?a.pointToProjected(e):a.pointToData(e)}function Ua(a,e,t,r){var i=a.getZoom(),o=a.getCenter(),n=e.zoom,l=a.projectedToPoint?a.projectedToPoint(o):a.dataToPoint(o);if(e.dx!=null&&e.dy!=null&&(l[0]-=e.dx,l[1]-=e.dy,a.setCenter(Ga(a,l),r)),n!=null){if(t){var u=t.min||0,s=t.max||1/0;n=Math.max(Math.min(i*n,s),u)/i}a.scaleX*=n,a.scaleY*=n;var c=(e.originX-a.x)*(n-1),f=(e.originY-a.y)*(n-1);a.x-=c,a.y-=f,a.updateTransform(),a.setCenter(Ga(a,l),r),a.setZoom(n*i)}return{center:a.getCenter(),zoom:a.getZoom()}}var Oi={type:"graphRoam",event:"graphRoam",update:"none"};function ki(a){a.registerChartView(Ea),a.registerSeriesModel(ka),a.registerProcessor(He),a.registerVisual(Ye),a.registerVisual(Ze),a.registerLayout(We),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,Je),a.registerLayout($e),a.registerCoordinateSystem("graphView",{dimensions:Le.dimensions,create:Qe}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Ne),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Ne),a.registerAction(Oi,function(e,t,r){t.eachComponent({mainType:"series",query:e},function(i){var o=i.coordinateSystem,n=Ua(o,e,void 0,r);i.setCenter&&i.setCenter(n.center),i.setZoom&&i.setZoom(n.zoom)})})}var Gi=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),Ui=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new Gi},e.prototype.buildPath=function(t,r){var i=Math.cos,o=Math.sin,n=r.r,l=r.width,u=r.angle,s=r.x-i(u)*l*(l>=n/3?1:2),c=r.y-o(u)*l*(l>=n/3?1:2);u=r.angle-Math.PI/2,t.moveTo(s,c),t.lineTo(r.x+i(u)*l,r.y+o(u)*l),t.lineTo(r.x+i(r.angle)*n,r.y+o(r.angle)*n),t.lineTo(r.x-i(u)*l,r.y-o(u)*l),t.lineTo(s,c)},e}(St),Ba=Ui;var Bi=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Fi=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Bi},e.prototype.buildPath=function(t,r){var i=r.cx,o=r.cy,n=Math.max(r.r0||0,0),l=Math.max(r.r,0),u=(l-n)*.5,s=n+u,c=r.startAngle,f=r.endAngle,v=r.clockwise,p=Math.PI*2,m=v?f-c<p:c-f<p;m||(c=f-(v?p:-p));var y=Math.cos(c),g=Math.sin(c),S=Math.cos(f),d=Math.sin(f);m?(t.moveTo(y*n+i,g*n+o),t.arc(y*s+i,g*s+o,u,-Math.PI+c,c,!v)):t.moveTo(y*l+i,g*l+o),t.arc(i,o,l,c,f,!v),t.arc(S*s+i,d*s+o,u,f-Math.PI*2,f-Math.PI,!v),n!==0&&t.arc(i,o,n,f,c,v)},e}(St),vr=Fi;function Hi(a,e){var t=a.get("center"),r=e.getWidth(),i=e.getHeight(),o=Math.min(r,i),n=N(t[0],e.getWidth()),l=N(t[1],e.getHeight()),u=N(a.get("radius"),o/2);return{cx:n,cy:l,r:u}}function De(a,e){var t=a==null?"":a+"";return e&&(st(e)?t=e.replace("{value}",t):yt(e)&&(t=e(a))),t}var Yi=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeAll();var o=t.get(["axisLine","lineStyle","color"]),n=Hi(t,i);this._renderMain(t,r,i,o,n),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,i,o,n){var l=this.group,u=t.get("clockwise"),s=-t.get("startAngle")/180*Math.PI,c=-t.get("endAngle")/180*Math.PI,f=t.getModel("axisLine"),v=f.get("roundCap"),p=v?vr:Jt,m=f.get("show"),y=f.getModel("lineStyle"),g=y.get("width"),S=[s,c];Hr(S,!u),s=S[0],c=S[1];for(var d=c-s,h=s,x=[],b=0;m&&b<o.length;b++){var I=Math.min(Math.max(o[b][0],0),1);c=s+d*I;var L=new p({shape:{startAngle:h,endAngle:c,cx:n.cx,cy:n.cy,clockwise:u,r0:n.r-g,r:n.r},silent:!0});L.setStyle({fill:o[b][1]}),L.setStyle(y.getLineStyle(["color","width"])),x.push(L),h=c}x.reverse(),G(x,function(D){return l.add(D)});var A=function(D){if(D<=0)return o[0][1];var w;for(w=0;w<o.length;w++)if(o[w][0]>=D&&(w===0?0:o[w-1][0])<D)return o[w][1];return o[w-1][1]};this._renderTicks(t,r,i,A,n,s,c,u,g),this._renderTitleAndDetail(t,r,i,A,n),this._renderAnchor(t,n),this._renderPointer(t,r,i,A,n,s,c,u,g)},e.prototype._renderTicks=function(t,r,i,o,n,l,u,s,c){for(var f=this.group,v=n.cx,p=n.cy,m=n.r,y=+t.get("min"),g=+t.get("max"),S=t.getModel("splitLine"),d=t.getModel("axisTick"),h=t.getModel("axisLabel"),x=t.get("splitNumber"),b=d.get("splitNumber"),I=N(S.get("length"),m),L=N(d.get("length"),m),A=l,D=(u-l)/x,w=D/b,T=S.getModel("lineStyle").getLineStyle(),_=d.getModel("lineStyle").getLineStyle(),P=S.get("distance"),E,z,C=0;C<=x;C++){if(E=Math.cos(A),z=Math.sin(A),S.get("show")){var M=P?P+c:c,V=new $t({shape:{x1:E*(m-M)+v,y1:z*(m-M)+p,x2:E*(m-I-M)+v,y2:z*(m-I-M)+p},style:T,silent:!0});T.stroke==="auto"&&V.setStyle({stroke:o(C/x)}),f.add(V)}if(h.get("show")){var M=h.get("distance")+P,U=De(ve(C/x*(g-y)+y),h.get("formatter")),k=o(C/x),F=E*(m-I-M)+v,_t=z*(m-I-M)+p,dt=h.get("rotate"),q=0;dt==="radial"?(q=-A+2*Math.PI,q>Math.PI/2&&(q+=Math.PI)):dt==="tangential"?q=-A-Math.PI/2:at(dt)&&(q=dt*Math.PI/180),q===0?f.add(new ht({style:Lt(h,{text:U,x:F,y:_t,verticalAlign:z<-.8?"top":z>.8?"bottom":"middle",align:E<-.4?"left":E>.4?"right":"center"},{inheritColor:k}),silent:!0})):f.add(new ht({style:Lt(h,{text:U,x:F,y:_t,verticalAlign:"middle",align:"center"},{inheritColor:k}),silent:!0,originX:F,originY:_t,rotation:q}))}if(d.get("show")&&C!==x){var M=d.get("distance");M=M?M+c:c;for(var lt=0;lt<=b;lt++){E=Math.cos(A),z=Math.sin(A);var Et=new $t({shape:{x1:E*(m-M)+v,y1:z*(m-M)+p,x2:E*(m-L-M)+v,y2:z*(m-L-M)+p},silent:!0,style:_});_.stroke==="auto"&&Et.setStyle({stroke:o((C+lt/b)/x)}),f.add(Et),A+=w}A-=w}else A+=D}},e.prototype._renderPointer=function(t,r,i,o,n,l,u,s,c){var f=this.group,v=this._data,p=this._progressEls,m=[],y=t.get(["pointer","show"]),g=t.getModel("progress"),S=g.get("show"),d=t.getData(),h=d.mapDimension("value"),x=+t.get("min"),b=+t.get("max"),I=[x,b],L=[l,u];function A(w,T){var _=d.getItemModel(w),P=_.getModel("pointer"),E=N(P.get("width"),n.r),z=N(P.get("length"),n.r),C=t.get(["pointer","icon"]),M=P.get("offsetCenter"),V=N(M[0],n.r),U=N(M[1],n.r),k=P.get("keepAspect"),F;return C?F=Tt(C,V-E/2,U-z,E,z,null,k):F=new Ba({shape:{angle:-Math.PI/2,width:E,r:z,x:V,y:U}}),F.rotation=-(T+Math.PI/2),F.x=n.cx,F.y=n.cy,F}function D(w,T){var _=g.get("roundCap"),P=_?vr:Jt,E=g.get("overlap"),z=E?g.get("width"):c/d.count(),C=E?n.r-z:n.r-(w+1)*z,M=E?n.r:n.r-w*z,V=new P({shape:{startAngle:l,endAngle:T,cx:n.cx,cy:n.cy,clockwise:s,r0:C,r:M}});return E&&(V.z2=j(d.get(h,w),[x,b],[100,0],!0)),V}(S||y)&&(d.diff(v).add(function(w){var T=d.get(h,w);if(y){var _=A(w,l);ot(_,{rotation:-((isNaN(+T)?L[0]:j(T,I,L,!0))+Math.PI/2)},t),f.add(_),d.setItemGraphicEl(w,_)}if(S){var P=D(w,l),E=g.get("clip");ot(P,{shape:{endAngle:j(T,I,L,E)}},t),f.add(P),Ue(t.seriesIndex,d.dataType,w,P),m[w]=P}}).update(function(w,T){var _=d.get(h,w);if(y){var P=v.getItemGraphicEl(T),E=P?P.rotation:l,z=A(w,E);z.rotation=E,Z(z,{rotation:-((isNaN(+_)?L[0]:j(_,I,L,!0))+Math.PI/2)},t),f.add(z),d.setItemGraphicEl(w,z)}if(S){var C=p[T],M=C?C.shape.endAngle:l,V=D(w,M),U=g.get("clip");Z(V,{shape:{endAngle:j(_,I,L,U)}},t),f.add(V),Ue(t.seriesIndex,d.dataType,w,V),m[w]=V}}).execute(),d.each(function(w){var T=d.getItemModel(w),_=T.getModel("emphasis"),P=_.get("focus"),E=_.get("blurScope"),z=_.get("disabled");if(y){var C=d.getItemGraphicEl(w),M=d.getItemVisual(w,"style"),V=M.fill;if(C instanceof Rt){var U=C.style;C.useStyle(O({image:U.image,x:U.x,y:U.y,width:U.width,height:U.height},M))}else C.useStyle(M),C.type!=="pointer"&&C.setColor(V);C.setStyle(T.getModel(["pointer","itemStyle"]).getItemStyle()),C.style.fill==="auto"&&C.setStyle("fill",o(j(d.get(h,w),I,[0,1],!0))),C.z2EmphasisLift=0,Kt(C,T),J(C,P,E,z)}if(S){var k=m[w];k.useStyle(d.getItemVisual(w,"style")),k.setStyle(T.getModel(["progress","itemStyle"]).getItemStyle()),k.z2EmphasisLift=0,Kt(k,T),J(k,P,E,z)}}),this._progressEls=m)},e.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor"),o=i.get("show");if(o){var n=i.get("size"),l=i.get("icon"),u=i.get("offsetCenter"),s=i.get("keepAspect"),c=Tt(l,r.cx-n/2+N(u[0],r.r),r.cy-n/2+N(u[1],r.r),n,n,null,s);c.z2=i.get("showAbove")?1:0,c.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(t,r,i,o,n){var l=this,u=t.getData(),s=u.mapDimension("value"),c=+t.get("min"),f=+t.get("max"),v=new it,p=[],m=[],y=t.isAnimationEnabled(),g=t.get(["pointer","showAbove"]);u.diff(this._data).add(function(S){p[S]=new ht({silent:!0}),m[S]=new ht({silent:!0})}).update(function(S,d){p[S]=l._titleEls[d],m[S]=l._detailEls[d]}).execute(),u.each(function(S){var d=u.getItemModel(S),h=u.get(s,S),x=new it,b=o(j(h,[c,f],[0,1],!0)),I=d.getModel("title");if(I.get("show")){var L=I.get("offsetCenter"),A=n.cx+N(L[0],n.r),D=n.cy+N(L[1],n.r),w=p[S];w.attr({z2:g?0:2,style:Lt(I,{x:A,y:D,text:u.getName(S),align:"center",verticalAlign:"middle"},{inheritColor:b})}),x.add(w)}var T=d.getModel("detail");if(T.get("show")){var _=T.get("offsetCenter"),P=n.cx+N(_[0],n.r),E=n.cy+N(_[1],n.r),z=N(T.get("width"),n.r),C=N(T.get("height"),n.r),M=t.get(["progress","show"])?u.getItemVisual(S,"style").fill:b,w=m[S],V=T.get("formatter");w.attr({z2:g?0:2,style:Lt(T,{x:P,y:E,text:De(h,V),width:isNaN(z)?null:z,height:isNaN(C)?null:C,align:"center",verticalAlign:"middle"},{inheritColor:M})}),Wr(w,{normal:T},h,function(k){return De(k,V)}),y&&qr(w,S,u,t,{getFormattedLabel:function(k,F,_t,dt,q,lt){return De(lt?lt.interpolatedValue:h,V)}}),x.add(w)}v.add(x)}),this.group.add(v),this._titleEls=p,this._detailEls=m},e.type="gauge",e}(vt),Fa=Yi;function ie(a,e,t){e=B(e)&&{coordDimensions:e}||O({encodeDefine:a.getEncode()},e);var r=a.getSource(),i=kt(r,e).dimensions,o=new mt(i,a);return o.initData(r,t),o}var Zi=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return ie(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(ft),Ha=Zi;function Xi(a){a.registerChartView(Fa),a.registerSeriesModel(Ha)}var oe=Math.PI*2,Ct=Yr.CMD,ji=["top","right","bottom","left"];function Wi(a,e,t,r,i){var o=t.width,n=t.height;switch(a){case"top":r.set(t.x+o/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+o/2,t.y+n+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+n/2),i.set(-1,0);break;case"right":r.set(t.x+o+e,t.y+n/2),i.set(1,0);break}}function qi(a,e,t,r,i,o,n,l,u){n-=a,l-=e;var s=Math.sqrt(n*n+l*l);n/=s,l/=s;var c=n*t+a,f=l*t+e;if(Math.abs(r-i)%oe<1e-4)return u[0]=c,u[1]=f,s-t;if(o){var v=r;r=ct(i),i=ct(v)}else r=ct(r),i=ct(i);r>i&&(i+=oe);var p=Math.atan2(l,n);if(p<0&&(p+=oe),p>=r&&p<=i||p+oe>=r&&p+oe<=i)return u[0]=c,u[1]=f,s-t;var m=t*Math.cos(r)+a,y=t*Math.sin(r)+e,g=t*Math.cos(i)+a,S=t*Math.sin(i)+e,d=(m-n)*(m-n)+(y-l)*(y-l),h=(g-n)*(g-n)+(S-l)*(S-l);return d<h?(u[0]=m,u[1]=y,Math.sqrt(d)):(u[0]=g,u[1]=S,Math.sqrt(h))}function hr(a,e,t,r,i,o,n,l){var u=i-a,s=o-e,c=t-a,f=r-e,v=Math.sqrt(c*c+f*f);c/=v,f/=v;var p=u*c+s*f,m=p/v;l&&(m=Math.min(Math.max(m,0),1)),m*=v;var y=n[0]=a+m*c,g=n[1]=e+m*f;return Math.sqrt((y-i)*(y-i)+(g-o)*(g-o))}function Za(a,e,t,r,i,o,n){t<0&&(a=a+t,t=-t),r<0&&(e=e+r,r=-r);var l=a+t,u=e+r,s=n[0]=Math.min(Math.max(i,a),l),c=n[1]=Math.min(Math.max(o,e),u);return Math.sqrt((s-i)*(s-i)+(c-o)*(c-o))}var nt=[];function Ki(a,e,t){var r=Za(e.x,e.y,e.width,e.height,a.x,a.y,nt);return t.set(nt[0],nt[1]),r}function Ji(a,e,t){for(var r=0,i=0,o=0,n=0,l,u,s=1/0,c=e.data,f=a.x,v=a.y,p=0;p<c.length;){var m=c[p++];p===1&&(r=c[p],i=c[p+1],o=r,n=i);var y=s;switch(m){case Ct.M:o=c[p++],n=c[p++],r=o,i=n;break;case Ct.L:y=hr(r,i,c[p],c[p+1],f,v,nt,!0),r=c[p++],i=c[p++];break;case Ct.C:y=Vr(r,i,c[p++],c[p++],c[p++],c[p++],c[p],c[p+1],f,v,nt),r=c[p++],i=c[p++];break;case Ct.Q:y=Or(r,i,c[p++],c[p++],c[p],c[p+1],f,v,nt),r=c[p++],i=c[p++];break;case Ct.A:var g=c[p++],S=c[p++],d=c[p++],h=c[p++],x=c[p++],b=c[p++];p+=1;var I=!!(1-c[p++]);l=Math.cos(x)*d+g,u=Math.sin(x)*h+S,p<=1&&(o=l,n=u);var L=(f-g)*h/d+g;y=qi(g,S,h,x,x+b,I,L,v,nt),r=Math.cos(x+b)*d+g,i=Math.sin(x+b)*h+S;break;case Ct.R:o=r=c[p++],n=i=c[p++];var A=c[p++],D=c[p++];y=Za(o,n,A,D,f,v,nt);break;case Ct.Z:y=hr(r,i,o,n,f,v,nt,!0),r=o,i=n;break}y<s&&(s=y,t.set(nt[0],nt[1]))}return s}var zt=new X,Y=new X,Q=new X,Yt=new X,ne=new X;function ws(a,e){if(a){var t=a.getTextGuideLine(),r=a.getTextContent();if(r&&t){var i=a.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],n=i.candidates||ji,l=r.getBoundingRect().clone();l.applyTransform(r.getComputedTransform());var u=1/0,s=i.anchor,c=a.getComputedTransform(),f=c&&ce([],c),v=e.get("length2")||0;s&&Q.copy(s);for(var p=0;p<n.length;p++){var m=n[p];Wi(m,0,l,zt,Yt),X.scaleAndAdd(Y,zt,Yt,v),Y.transform(f);var y=a.getBoundingRect(),g=s?s.distance(Y):a instanceof St?Ji(Y,a.path,Q):Ki(Y,y,Q);g<u&&(u=g,Y.transform(c),Q.transform(c),Q.toArray(o[0]),Y.toArray(o[1]),zt.toArray(o[2]))}$i(o,e.get("minTurnAngle")),t.setShape({points:o})}}}var Ya=[],Mt=new X;function $i(a,e){if(e<=180&&e>0){e=e/180*Math.PI,zt.fromArray(a[0]),Y.fromArray(a[1]),Q.fromArray(a[2]),X.sub(Yt,zt,Y),X.sub(ne,Q,Y);var t=Yt.len(),r=ne.len();if(!(t<.001||r<.001)){Yt.scale(1/t),ne.scale(1/r);var i=Yt.dot(ne),o=Math.cos(e);if(o<i){var n=hr(Y.x,Y.y,Q.x,Q.y,zt.x,zt.y,Ya,!1);Mt.fromArray(Ya),Mt.scaleAndAdd(ne,n/Math.tan(Math.PI-e));var l=Q.x!==Y.x?(Mt.x-Y.x)/(Q.x-Y.x):(Mt.y-Y.y)/(Q.y-Y.y);if(isNaN(l))return;l<0?X.copy(Mt,Y):l>1&&X.copy(Mt,Q),Mt.toArray(a[1])}}}}function pr(a,e,t,r){var i=t==="normal",o=i?a:a.ensureState(t);o.ignore=e;var n=r.get("smooth");n&&n===!0&&(n=.3),o.shape=o.shape||{},n>0&&(o.shape.smooth=n);var l=r.getModel("lineStyle").getLineStyle();i?a.useStyle(l):o.style=l}function Qi(a,e){var t=e.smooth,r=e.points;if(r)if(a.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=ke(r[0],r[1]),o=ke(r[1],r[2]);if(!i||!o){a.lineTo(r[1][0],r[1][1]),a.lineTo(r[2][0],r[2][1]);return}var n=Math.min(i,o)*t,l=se([],r[1],r[0],n/i),u=se([],r[1],r[2],n/o),s=se([],l,u,.5);a.bezierCurveTo(l[0],l[1],l[0],l[1],s[0],s[1]),a.bezierCurveTo(u[0],u[1],u[0],u[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)a.lineTo(r[c][0],r[c][1])}function Xa(a,e,t){var r=a.getTextGuideLine(),i=a.getTextContent();if(!i){r&&a.removeTextGuideLine();return}for(var o=e.normal,n=o.get("show"),l=i.ignore,u=0;u<qt.length;u++){var s=qt[u],c=e[s],f=s==="normal";if(c){var v=c.get("show"),p=f?l:Re(i.states[s]&&i.states[s].ignore,l);if(p||!Re(v,n)){var m=f?r:r&&r.states[s];m&&(m.ignore=!0),r&&pr(r,!0,s,c);continue}r||(r=new de,a.setTextGuideLine(r),!f&&(l||!n)&&pr(r,!0,"normal",e.normal),a.stateProxy&&(r.stateProxy=a.stateProxy)),pr(r,!1,s,c)}}if(r){wr(r.style,t),r.style.fill=null;var y=o.get("showAbove"),g=a.textGuideLineConfig=a.textGuideLineConfig||{};g.showAbove=y||!1,r.buildPath=Qi}}function ja(a,e){e=e||"labelLine";for(var t={normal:a.getModel(e)},r=0;r<It.length;r++){var i=It[r];t[i]=a.getModel([i,e])}return t}var to=["itemStyle","opacity"],eo=function(a){R(e,a);function e(t,r){var i=a.call(this)||this,o=i,n=new de,l=new ht;return o.setTextContent(l),i.setTextGuideLine(n),i.updateData(t,r,!0),i}return e.prototype.updateData=function(t,r,i){var o=this,n=t.hostModel,l=t.getItemModel(r),u=t.getItemLayout(r),s=l.getModel("emphasis"),c=l.get(to);c=c??1,i||Nt(o),o.useStyle(t.getItemVisual(r,"style")),o.style.lineJoin="round",i?(o.setShape({points:u.points}),o.style.opacity=0,ot(o,{style:{opacity:c}},n,r)):Z(o,{style:{opacity:c},shape:{points:u.points}},n,r),Kt(o,l),this._updateLabel(t,r),J(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t,r){var i=this,o=this.getTextGuideLine(),n=i.getTextContent(),l=t.hostModel,u=t.getItemModel(r),s=t.getItemLayout(r),c=s.label,f=t.getItemVisual(r,"style"),v=f.fill;xt(n,$(u),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:f.opacity,defaultText:t.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:v,outsideFill:v});var p=c.linePoints;o.setShape({points:p}),i.textGuideLineConfig={anchor:p?new X(p[0][0],p[0][1]):null},Z(n,{style:{x:c.x,y:c.y}},l,r),n.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),Xa(i,ja(u),{stroke:v})},e}(Zr),ro=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i){var o=t.getData(),n=this._data,l=this.group;o.diff(n).add(function(u){var s=new eo(o,u);o.setItemGraphicEl(u,s),l.add(s)}).update(function(u,s){var c=n.getItemGraphicEl(s);c.updateData(o,u),l.add(c),o.setItemGraphicEl(u,c)}).remove(function(u){var s=n.getItemGraphicEl(u);jr(s,t,u)}).execute(),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(vt),Wa=ro;var ao=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ae(Ee(this.getData,this),Ee(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return ie(this,{coordDimensions:["value"],encodeDefaulter:rt(Jr,this)})},e.prototype._defaultLabelLine=function(t){pe(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),i=a.prototype.getDataParams.call(this,t),o=r.mapDimension("value"),n=r.getSum(o);return i.percent=n?+(r.get(o,t)/n*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ft),qa=ao;function io(a,e){return Se(a.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function oo(a,e){for(var t=a.mapDimension("value"),r=a.mapArray(t,function(u){return u}),i=[],o=e==="ascending",n=0,l=a.count();n<l;n++)i[n]=n;return yt(e)?i.sort(e):e!=="none"&&i.sort(function(u,s){return o?r[u]-r[s]:r[s]-r[u]}),i}function no(a){var e=a.hostModel,t=e.get("orient");a.each(function(r){var i=a.getItemModel(r),o=i.getModel("label"),n=o.get("position"),l=i.getModel("labelLine"),u=a.getItemLayout(r),s=u.points,c=n==="inner"||n==="inside"||n==="center"||n==="insideLeft"||n==="insideRight",f,v,p,m;if(c)n==="insideLeft"?(v=(s[0][0]+s[3][0])/2+5,p=(s[0][1]+s[3][1])/2,f="left"):n==="insideRight"?(v=(s[1][0]+s[2][0])/2-5,p=(s[1][1]+s[2][1])/2,f="right"):(v=(s[0][0]+s[1][0]+s[2][0]+s[3][0])/4,p=(s[0][1]+s[1][1]+s[2][1]+s[3][1])/4,f="center"),m=[[v,p],[v,p]];else{var y=void 0,g=void 0,S=void 0,d=void 0,h=l.get("length");n==="left"?(y=(s[3][0]+s[0][0])/2,g=(s[3][1]+s[0][1])/2,S=y-h,v=S-5,f="right"):n==="right"?(y=(s[1][0]+s[2][0])/2,g=(s[1][1]+s[2][1])/2,S=y+h,v=S+5,f="left"):n==="top"?(y=(s[3][0]+s[0][0])/2,g=(s[3][1]+s[0][1])/2,d=g-h,p=d-5,f="center"):n==="bottom"?(y=(s[1][0]+s[2][0])/2,g=(s[1][1]+s[2][1])/2,d=g+h,p=d+5,f="center"):n==="rightTop"?(y=t==="horizontal"?s[3][0]:s[1][0],g=t==="horizontal"?s[3][1]:s[1][1],t==="horizontal"?(d=g-h,p=d-5,f="center"):(S=y+h,v=S+5,f="top")):n==="rightBottom"?(y=s[2][0],g=s[2][1],t==="horizontal"?(d=g+h,p=d+5,f="center"):(S=y+h,v=S+5,f="bottom")):n==="leftTop"?(y=s[0][0],g=t==="horizontal"?s[0][1]:s[1][1],t==="horizontal"?(d=g-h,p=d-5,f="center"):(S=y-h,v=S-5,f="right")):n==="leftBottom"?(y=t==="horizontal"?s[1][0]:s[3][0],g=t==="horizontal"?s[1][1]:s[2][1],t==="horizontal"?(d=g+h,p=d+5,f="center"):(S=y-h,v=S-5,f="right")):(y=(s[1][0]+s[2][0])/2,g=(s[1][1]+s[2][1])/2,t==="horizontal"?(d=g+h,p=d+5,f="center"):(S=y+h,v=S+5,f="left")),t==="horizontal"?(S=y,v=S):(d=g,p=d),m=[[y,g],[S,d]]}u.label={linePoints:m,x:v,y:p,verticalAlign:"middle",textAlign:f,inside:c}})}function mr(a,e){a.eachSeriesByType("funnel",function(t){var r=t.getData(),i=r.mapDimension("value"),o=t.get("sort"),n=io(t,e),l=t.get("orient"),u=n.width,s=n.height,c=oo(r,o),f=n.x,v=n.y,p=l==="horizontal"?[N(t.get("minSize"),s),N(t.get("maxSize"),s)]:[N(t.get("minSize"),u),N(t.get("maxSize"),u)],m=r.getDataExtent(i),y=t.get("min"),g=t.get("max");y==null&&(y=Math.min(m[0],0)),g==null&&(g=m[1]);var S=t.get("funnelAlign"),d=t.get("gap"),h=l==="horizontal"?u:s,x=(h-d*(r.count()-1))/r.count(),b=function(E,z){if(l==="horizontal"){var C=r.get(i,E)||0,M=j(C,[y,g],p,!0),V=void 0;switch(S){case"top":V=v;break;case"center":V=v+(s-M)/2;break;case"bottom":V=v+(s-M);break}return[[z,V],[z,V+M]]}var U=r.get(i,E)||0,k=j(U,[y,g],p,!0),F;switch(S){case"left":F=f;break;case"center":F=f+(u-k)/2;break;case"right":F=f+u-k;break}return[[F,z],[F+k,z]]};o==="ascending"&&(x=-x,d=-d,l==="horizontal"?f+=u:v+=s,c=c.reverse());for(var I=0;I<c.length;I++){var L=c[I],A=c[I+1],D=r.getItemModel(L);if(l==="horizontal"){var w=D.get(["itemStyle","width"]);w==null?w=x:(w=N(w,u),o==="ascending"&&(w=-w));var T=b(L,f),_=b(A,f+w);f+=w+d,r.setItemLayout(L,{points:T.concat(_.slice().reverse())})}else{var P=D.get(["itemStyle","height"]);P==null?P=x:(P=N(P,s),o==="ascending"&&(P=-P));var T=b(L,v),_=b(A,v+P);v+=P+d,r.setItemLayout(L,{points:T.concat(_.slice().reverse())})}}no(r)})}function le(a){return{seriesType:a,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(o){for(var n=i.getName(o),l=0;l<r.length;l++)if(!r[l].isSelected(n))return!1;return!0})}}}}function lo(a){a.registerChartView(Wa),a.registerSeriesModel(qa),a.registerLayout(mr),a.registerProcessor(le("funnel"))}var so=256,uo=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=Me.createCanvas();this.canvas=e}return a.prototype.update=function(e,t,r,i,o,n){var l=this._getBrush(),u=this._getGradient(o,"inRange"),s=this._getGradient(o,"outOfRange"),c=this.pointSize+this.blurSize,f=this.canvas,v=f.getContext("2d"),p=e.length;f.width=t,f.height=r;for(var m=0;m<p;++m){var y=e[m],g=y[0],S=y[1],d=y[2],h=i(d);v.globalAlpha=h,v.drawImage(l,g-c,S-c)}if(!f.width||!f.height)return f;for(var x=v.getImageData(0,0,f.width,f.height),b=x.data,I=0,L=b.length,A=this.minOpacity,D=this.maxOpacity,w=D-A;I<L;){var h=b[I+3]/256,T=Math.floor(h*(so-1))*4;if(h>0){var _=n(h)?u:s;h>0&&(h=h*w+A),b[I++]=_[T],b[I++]=_[T+1],b[I++]=_[T+2],b[I++]=_[T+3]*h*256}else I+=4}return v.putImageData(x,0,0),f},a.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=Me.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},a.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(256*4)),o=[0,0,0,0],n=0,l=0;l<256;l++)e[t](l/255,!0,o),i[n++]=o[0],i[n++]=o[1],i[n++]=o[2],i[n++]=o[3];return i},a}(),Ka=uo;function Ja(a,e){return a.type===e}function co(a,e,t){var r=a[1]-a[0];e=K(e,function(n){return{interval:[(n.interval[0]-a[0])/r,(n.interval[1]-a[0])/r]}});var i=e.length,o=0;return function(n){var l;for(l=o;l<i;l++){var u=e[l].interval;if(u[0]<=n&&n<=u[1]){o=l;break}}if(l===i)for(l=o-1;l>=0;l--){var u=e[l].interval;if(u[0]<=n&&n<=u[1]){o=l;break}}return l>=0&&l<i&&t[l]}}function fo(a,e){var t=a[1]-a[0];return e=[(e[0]-a[0])/t,(e[1]-a[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function $a(a){var e=a.dimensions;return e[0]==="lng"&&e[1]==="lat"}var vo=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var o;r.eachComponent("visualMap",function(l){l.eachTargetSeries(function(u){u===t&&(o=l)})}),this._progressiveEls=null,this.group.removeAll();var n=t.coordinateSystem;n.type==="cartesian2d"||n.type==="calendar"?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):$a(n)&&this._renderOnGeo(n,t,o,i)},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,i,o){var n=r.coordinateSystem;n&&($a(n)?this.render(r,i,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,o,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Ot(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,r,i,o,n){var l=t.coordinateSystem,u=Ja(l,"cartesian2d"),s,c,f,v;if(u){var p=l.getAxis("x"),m=l.getAxis("y");s=p.getBandWidth()+.5,c=m.getBandWidth()+.5,f=p.scale.getExtent(),v=m.scale.getExtent()}for(var y=this.group,g=t.getData(),S=t.getModel(["emphasis","itemStyle"]).getItemStyle(),d=t.getModel(["blur","itemStyle"]).getItemStyle(),h=t.getModel(["select","itemStyle"]).getItemStyle(),x=t.get(["itemStyle","borderRadius"]),b=$(t),I=t.getModel("emphasis"),L=I.get("focus"),A=I.get("blurScope"),D=I.get("disabled"),w=u?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],T=i;T<o;T++){var _=void 0,P=g.getItemVisual(T,"style");if(u){var E=g.get(w[0],T),z=g.get(w[1],T);if(isNaN(g.get(w[2],T))||isNaN(E)||isNaN(z)||E<f[0]||E>f[1]||z<v[0]||z>v[1])continue;var C=l.dataToPoint([E,z]);_=new Ge({shape:{x:C[0]-s/2,y:C[1]-c/2,width:s,height:c},style:P})}else{if(isNaN(g.get(w[1],T)))continue;_=new Ge({z2:1,shape:l.dataToRect([g.get(w[0],T)]).contentShape,style:P})}if(g.hasItemOption){var M=g.getItemModel(T),V=M.getModel("emphasis");S=V.getModel("itemStyle").getItemStyle(),d=M.getModel(["blur","itemStyle"]).getItemStyle(),h=M.getModel(["select","itemStyle"]).getItemStyle(),x=M.get(["itemStyle","borderRadius"]),L=V.get("focus"),A=V.get("blurScope"),D=V.get("disabled"),b=$(M)}_.shape.r=x;var U=t.getRawValue(T),k="-";U&&U[2]!=null&&(k=U[2]+""),xt(_,b,{labelFetcher:t,labelDataIndex:T,defaultOpacity:P.opacity,defaultText:k}),_.ensureState("emphasis").style=S,_.ensureState("blur").style=d,_.ensureState("select").style=h,J(_,L,A,D),_.incremental=n,n&&(_.states.emphasis.hoverLayer=!0),y.add(_),g.setItemGraphicEl(T,_),this._progressiveEls&&this._progressiveEls.push(_)}},e.prototype._renderOnGeo=function(t,r,i,o){var n=i.targetVisuals.inRange,l=i.targetVisuals.outOfRange,u=r.getData(),s=this._hmLayer||this._hmLayer||new Ka;s.blurSize=r.get("blurSize"),s.pointSize=r.get("pointSize"),s.minOpacity=r.get("minOpacity"),s.maxOpacity=r.get("maxOpacity");var c=t.getViewRect().clone(),f=t.getRoamTransform();c.applyTransform(f);var v=Math.max(c.x,0),p=Math.max(c.y,0),m=Math.min(c.width+c.x,o.getWidth()),y=Math.min(c.height+c.y,o.getHeight()),g=m-v,S=y-p,d=[u.mapDimension("lng"),u.mapDimension("lat"),u.mapDimension("value")],h=u.mapArray(d,function(L,A,D){var w=t.dataToPoint([L,A]);return w[0]-=v,w[1]-=p,w.push(D),w}),x=i.getExtent(),b=i.type==="visualMap.continuous"?fo(x,i.option.range):co(x,i.getPieceList(),i.option.selected);s.update(h,g,S,n.color.getNormalizer(),{inRange:n.color.getColorMapper(),outOfRange:l.color.getColorMapper()},b);var I=new Rt({style:{width:g,height:S,x:v,y:p,image:s.canvas},silent:!0});this.group.add(I)},e.type="heatmap",e}(vt),Qa=vo;var po=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Ie(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=be.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(ft),ti=po;function ho(a){a.registerChartView(Qa),a.registerSeriesModel(ti)}function gr(a,e,t){var r=a.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;B(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:K(r,function(o){return Gr(o,i)})}}var mo=2,go=4,yo=function(a){R(e,a);function e(t,r,i,o){var n=a.call(this)||this;n.z2=mo,n.textConfig={inside:!0},bt(n).seriesIndex=r.seriesIndex;var l=new ht({z2:go,silent:t.getModel().get(["label","silent"])});return n.setTextContent(l),n.updateData(!0,t,r,i,o),n}return e.prototype.updateData=function(t,r,i,o,n){this.node=r,r.piece=this,i=i||this._seriesModel,o=o||this._ecModel;var l=this;bt(l).dataIndex=r.dataIndex;var u=r.getModel(),s=u.getModel("emphasis"),c=r.getLayout(),f=O({},c);f.label=null;var v=r.getVisual("style");v.lineJoin="bevel";var p=r.getVisual("decal");p&&(v.decal=ea(p,n));var m=gr(u.getModel("itemStyle"),f,!0);O(f,m),G(It,function(d){var h=l.ensureState(d),x=u.getModel([d,"itemStyle"]);h.style=x.getItemStyle();var b=gr(x,f);b&&(h.shape=b)}),t?(l.setShape(f),l.shape.r=c.r0,ot(l,{shape:{r:c.r}},i,r.dataIndex)):(Z(l,{shape:f},i),Nt(l)),l.useStyle(v),this._updateLabel(i);var y=u.getShallow("cursor");y&&l.attr("cursor",y),this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel;var g=s.get("focus"),S=g==="relative"?Ar(r.getAncestorsIndices(),r.getDescendantIndices()):g==="ancestor"?r.getAncestorsIndices():g==="descendant"?r.getDescendantIndices():g;J(this,S,s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),o=i.getModel("label"),n=this.node.getLayout(),l=n.endAngle-n.startAngle,u=(n.startAngle+n.endAngle)/2,s=Math.cos(u),c=Math.sin(u),f=this,v=f.getTextContent(),p=this.node.dataIndex,m=o.get("minAngle")/180*Math.PI,y=o.get("show")&&!(m!=null&&Math.abs(l)<m);v.ignore=!y,G(qt,function(S){var d=S==="normal"?i.getModel("label"):i.getModel([S,"label"]),h=S==="normal",x=h?v:v.ensureState(S),b=t.getFormattedLabel(p,S);h&&(b=b||r.node.name),x.style=Lt(d,{},null,S!=="normal",!0),b&&(x.style.text=b);var I=d.get("show");I!=null&&!h&&(x.ignore=!I);var L=g(d,"position"),A=h?f:f.states[S],D=A.style.fill;A.textConfig={outsideFill:d.get("color")==="inherit"?D:null,inside:L!=="outside"};var w,T=g(d,"distance")||0,_=g(d,"align"),P=g(d,"rotate"),E=Math.PI*.5,z=Math.PI*1.5,C=ct(P==="tangential"?Math.PI/2-u:u),M=C>E&&!Ur(C-E)&&C<z;L==="outside"?(w=n.r+T,_=M?"right":"left"):!_||_==="center"?(l===2*Math.PI&&n.r0===0?w=0:w=(n.r+n.r0)/2,_="center"):_==="left"?(w=n.r0+T,_=M?"right":"left"):_==="right"&&(w=n.r-T,_=M?"left":"right"),x.style.align=_,x.style.verticalAlign=g(d,"verticalAlign")||"middle",x.x=w*s+n.cx,x.y=w*c+n.cy;var V=0;P==="radial"?V=ct(-u)+(M?Math.PI:0):P==="tangential"?V=ct(Math.PI/2-u)+(M?Math.PI:0):at(P)&&(V=P*Math.PI/180),x.rotation=ct(V)});function g(S,d){var h=S.get(d);return h??o.get(d)}v.dirtyStyle()},e}(Jt),dr=yo;function yr(a,e,t){if(a&&Zt(e,a.type)>=0){var r=t.getData().tree.root,i=a.targetNode;if(st(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var o=a.targetNodeId;if(o!=null&&(i=r.getNodeById(o)))return{node:i}}}function So(a){for(var e=[];a;)a=a.parentNode,a&&e.push(a);return e.reverse()}function ei(a,e){var t=So(a);return Zt(t,e)>=0}function ri(a,e){for(var t=[];a;){var r=a.dataIndex;t.push({name:a.name,dataIndex:r,value:e.getRawValue(r)}),a=a.parentNode}return t.reverse(),t}var Pe="sunburstRootToNode",ai="sunburstHighlight",bo="sunburstUnhighlight";function ii(a){a.registerAction({type:Pe,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,o){var n=yr(e,[Pe],i);if(n){var l=i.getViewRoot();l&&(e.direction=ei(l,n.node)?"rollUp":"drillDown"),i.resetViewRoot(n.node)}}}),a.registerAction({type:ai,update:"none"},function(e,t,r){e=O({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(o){var n=yr(e,[ai],o);n&&(e.dataIndex=n.node.dataIndex)}r.dispatchAction(O(e,{type:"highlight"}))}),a.registerAction({type:bo,update:"updateView"},function(e,t,r){e=O({},e),r.dispatchAction(O(e,{type:"downplay"}))})}var Io=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,o){var n=this;this.seriesModel=t,this.api=i,this.ecModel=r;var l=t.getData(),u=l.tree.root,s=t.getViewRoot(),c=this.group,f=t.get("renderLabelForZeroData"),v=[];s.eachNode(function(d){v.push(d)});var p=this._oldChildren||[];m(v,p),S(u,s),this._initEvents(),this._oldChildren=v;function m(d,h){if(d.length===0&&h.length===0)return;new ra(h,d,x,x).add(b).update(b).remove(rt(b,null)).execute();function x(I){return I.getId()}function b(I,L){var A=I==null?null:d[I],D=L==null?null:h[L];y(A,D)}}function y(d,h){if(!f&&d&&!d.getValue()&&(d=null),d!==u&&h!==u){if(h&&h.piece)d?(h.piece.updateData(!1,d,t,r,i),l.setItemGraphicEl(d.dataIndex,h.piece)):g(h);else if(d){var x=new dr(d,t,r,i);c.add(x),l.setItemGraphicEl(d.dataIndex,x)}}}function g(d){d&&d.piece&&(c.remove(d.piece),d.piece=null)}function S(d,h){h.depth>0?(n.virtualPiece?n.virtualPiece.updateData(!1,d,t,r,i):(n.virtualPiece=new dr(d,t,r,i),c.add(n.virtualPiece)),h.piece.off("click"),n.virtualPiece.on("click",function(x){n._rootToNode(h.parentNode)})):n.virtualPiece&&(c.remove(n.virtualPiece),n.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,o=t.seriesModel.getViewRoot();o.eachNode(function(n){if(!i&&n.piece&&n.piece===r.target){var l=n.getModel().get("nodeClick");if(l==="rootToNode")t._rootToNode(n);else if(l==="link"){var u=n.getModel(),s=u.get("link");if(s){var c=u.get("target",!0)||"_blank";Kr(s,c)}}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Pe,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var i=r.getData(),o=i.getItemLayout(0);if(o){var n=t[0]-o.cx,l=t[1]-o.cy,u=Math.sqrt(n*n+l*l);return u<=o.r&&u>=o.r0}},e.type="sunburst",e}(vt),oi=Io;var xo=function(){function a(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(e,t,r){yt(e)&&(r=t,t=e,e=null),e=e||{},st(e)&&(e={order:e});var i=e.order||"preorder",o=this[e.attr||"children"],n;i==="preorder"&&(n=t.call(r,this));for(var l=0;!n&&l<o.length;l++)o[l].eachNode(e,t,r);i==="postorder"&&t.call(r,this)},a.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},a.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var o=r[t].getNodeById(e);if(o)return o}},a.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var o=r[t].contains(e);if(o)return o}},a.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},a.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},a.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},a.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},a.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},a.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},a.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},a.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},a}();var wo=function(){function a(e){this.type="tree",this._nodes=[],this.hostModel=e}return a.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},a.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},a.prototype.getNodeById=function(e){return this.root.getNodeById(e)},a.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(e,t,r){var i=new a(t),o=[],n=1;l(e);function l(c,f){var v=c.value;n=Math.max(n,B(v)?v.length:1),o.push(c);var p=new xo(he(c.name,""),i);f?_o(p,f):i.root=p,i._nodes.push(p);var m=c.children;if(m)for(var y=0;y<m.length;y++)l(m[y],p)}i.root.updateDepthAndHeight(0);var u=kt(o,{coordDimensions:["value"],dimensionsCount:n}).dimensions,s=new mt(u,t);return s.initData(o),r&&r(s),Te({mainData:s,struct:i,structAttr:"tree"}),i.update(),i},a}();function _o(a,e){var t=e.children;a.parentNode!==e&&(t.push(a),a.parentNode=e)}var ni=wo;function Sr(a){var e=a.getData(),t=e.tree,r={};t.eachNode(function(i){for(var o=i;o&&o.depth>1;)o=o.parentNode;var n=$r(a.ecModel,o.name||o.dataIndex+"",r);i.setVisual("decal",n)})}var Lo=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};li(i);var o=this._levelModels=K(t.levels||[],function(u){return new ye(u,this,r)},this),n=ni.createTree(i,this,l);function l(u){u.wrapMethod("getItemModel",function(s,c){var f=n.getNodeByDataIndex(c),v=o[f.depth];return v&&(s.parentModel=v),s})}return n.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=a.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=ri(i,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){Sr(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(ft);function li(a){var e=0;G(a.children,function(r){li(r);var i=r.value;B(i)&&(i=i[0]),e+=i});var t=a.value;B(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),B(a.value)?a.value[0]=t:a.value=t}var si=Lo;var ui=Math.PI/180;function br(a,e,t){e.eachSeriesByType(a,function(r){var i=r.get("center"),o=r.get("radius");B(o)||(o=[0,o]),B(i)||(i=[i,i]);var n=t.getWidth(),l=t.getHeight(),u=Math.min(n,l),s=N(i[0],n),c=N(i[1],l),f=N(o[0],u/2),v=N(o[1],u/2),p=-r.get("startAngle")*ui,m=r.get("minAngle")*ui,y=r.getData().tree.root,g=r.getViewRoot(),S=g.depth,d=r.get("sort");d!=null&&ci(g,d);var h=0;G(g.children,function(C){!isNaN(C.getValue())&&h++});var x=g.getValue(),b=Math.PI/(x||h)*2,I=g.depth>0,L=g.height-(I?-1:1),A=(v-f)/(L||1),D=r.get("clockwise"),w=r.get("stillShowZeroSum"),T=D?1:-1,_=function(C,M){if(C){var V=M;if(C!==y){var U=C.getValue(),k=x===0&&w?b:U*b;k<m&&(k=m),V=M+T*k;var F=C.depth-S-(I?-1:1),_t=f+A*F,dt=f+A*(F+1),q=r.getLevelModel(C);if(q){var lt=q.get("r0",!0),Et=q.get("r",!0),Ce=q.get("radius",!0);Ce!=null&&(lt=Ce[0],Et=Ce[1]),lt!=null&&(_t=N(lt,u/2)),Et!=null&&(dt=N(Et,u/2))}C.setLayout({angle:k,startAngle:M,endAngle:V,clockwise:D,cx:s,cy:c,r0:_t,r:dt})}if(C.children&&C.children.length){var xr=0;G(C.children,function(fi){xr+=_(fi,M+xr)})}return V-M}};if(I){var P=f,E=f+A,z=Math.PI*2;y.setLayout({angle:z,startAngle:p,endAngle:p+z,clockwise:D,cx:s,cy:c,r0:P,r:E})}_(g,p)})}function ci(a,e){var t=a.children||[];a.children=To(t,e),t.length&&G(a.children,function(r){ci(r,e)})}function To(a,e){if(yt(e)){var t=K(a,function(i,o){var n=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return n}},index:o}});return t.sort(function(i,o){return e(i.params,o.params)}),K(t,function(i){return a[i.index]})}else{var r=e==="asc";return a.sort(function(i,o){var n=(i.getValue()-o.getValue())*(r?1:-1);return n===0?(i.dataIndex-o.dataIndex)*(r?-1:1):n})}}function Ir(a){var e={};function t(r,i,o){for(var n=r;n&&n.depth>1;)n=n.parentNode;var l=i.getColorFromPalette(n.name||n.dataIndex+"",e);return r.depth>1&&st(l)&&(l=kr(l,(r.depth-1)/(o-1)*.5)),l}a.eachSeriesByType("sunburst",function(r){var i=r.getData(),o=i.tree;o.eachNode(function(n){var l=n.getModel(),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=t(n,r,o.root.height));var s=i.ensureUniqueItemVisual(n.dataIndex,"style");O(s,u)})})}function Ao(a){a.registerChartView(oi),a.registerSeriesModel(si),a.registerLayout(rt(br,"sunburst")),a.registerProcessor(rt(le,"sunburst")),a.registerVisual(Ir),ii(a)}export{ws as a,Xa as b,ja as c,ki as d,Xi as e,lo as f,ho as g,Ao as h};
