import{a as u,d as y,f as x,o as i,p as v,q as C}from"./chunk-IVKNQDWJ.js";import{a as h,b as d}from"./chunk-HMR6D4PY.js";import"./chunk-KIRPRCXL.js";import"./chunk-7X44HFL5.js";import{Wa as m,qb as p,rb as g,sb as f}from"./chunk-Q3C673SS.js";import"./chunk-JKOY2XUY.js";var b=class s{margin={top:20,right:20,bottom:20,left:20};width=430-this.margin.left-this.margin.right;height=430-this.margin.top-this.margin.bottom;svg;ngOnInit(){this.getTheData()}getTheData(){x("https://raw.githubusercontent.com/fvdavid/d3-in-action/refs/heads/main/data/data_correlogram.csv").then(r=>{this.createSvg(r)})}createSvg(r){this.svg=y("figure#correlogram").append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);let e=new Array;r.forEach(function(t){let a=t[""];delete t[""];for(let o in t){let M=o,S=t[o];e.push({x:a,y:M,value:+S})}});let n=Array.from(u(e,t=>t.x).keys()),F=Math.sqrt(e.length),l=v([-1,0,1],["#B22222","#fff","#000080"]),w=C().domain([0,1]).range([0,9]),O=i().range([0,this.width]).domain(n),D=i().range([0,this.height]).domain(n),c=this.svg.selectAll(".cor").data(e).enter().append("g").attr("class","cor").attr("transform",function(t){return"translate("+O(t.x)+","+D(t.y)+")"});c.filter(function(t){let a=n.indexOf(t.y);return n.indexOf(t.x)<=a}).append("text").attr("y",5).text(function(t){return t.x===t.y?t.x:t.value.toFixed(2)}).style("font-size",11).style("text-align","center").style("fill",function(t){return t.x===t.y?"#000":l(t.value)}),c.filter(function(t){let a=n.indexOf(t.y);return n.indexOf(t.x)>a}).append("circle").attr("r",function(t){return w(Math.abs(t.value))}).style("fill",function(t){return t.x===t.y?"#000":l(t.value)}).style("opacity",.8)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=m({type:s,selectors:[["app-correlogram"]],decls:4,vars:0,consts:[[1,"grid","grid-cols-12","gap-8"],[1,"col-span-12","xl:col-span-12"],[1,"card"],["id","correlogram"]],template:function(e,n){e&1&&(p(0,"p-fluid",0)(1,"div",1)(2,"div",2),f(3,"figure",3),g()()())},dependencies:[d,h],encapsulation:2})};export{b as CorrelogramComponent};
